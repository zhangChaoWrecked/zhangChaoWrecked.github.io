<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Wrecked</title>
  
  <subtitle>Holding You Back As I Breath You In</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2019-11-07T02:58:57.841Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Wrecked</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Linux服务器如何禁用密码登录，使用秘钥文件登录增加服务器安全性？</title>
    <link href="http://yoursite.com/2019/11/05/Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%A6%82%E4%BD%95%E7%A6%81%E7%94%A8%E5%AF%86%E7%A0%81%E7%99%BB%E5%BD%95%EF%BC%8C%E4%BD%BF%E7%94%A8%E7%A7%98%E9%92%A5%E6%96%87%E4%BB%B6%E7%99%BB%E5%BD%95%E5%A2%9E%E5%8A%A0%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AE%89%E5%85%A8%E6%80%A7/"/>
    <id>http://yoursite.com/2019/11/05/Linux服务器如何禁用密码登录，使用秘钥文件登录增加服务器安全性/</id>
    <published>2019-11-05T09:39:31.000Z</published>
    <updated>2019-11-07T02:58:57.841Z</updated>
    
    <content type="html"><![CDATA[<h5 id="生成秘钥公钥"><a href="#生成秘钥公钥" class="headerlink" title="生成秘钥公钥"></a>生成秘钥公钥</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">$  ssh-keygen       //生成秘钥</span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file in which to save the key (/root/.ssh/id_rsa): </span><br><span class="line">Enter passphrase (empty for no passphrase): </span><br><span class="line">Enter same passphrase again: </span><br><span class="line">Your identification has been saved in /root/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved in /root/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">The key&apos;s randomart image is:</span><br><span class="line">+---[RSA 2048]----+</span><br><span class="line">|      .o=B@*.    |</span><br><span class="line">|   . = =o*.*.    |</span><br><span class="line">|. . + @ + o o    |</span><br><span class="line">|oo o * +         |</span><br><span class="line">|o +.. + S        |</span><br><span class="line">|.oo.   .         |</span><br><span class="line">| =.              |</span><br><span class="line">|..=oE            |</span><br><span class="line">| *+ o.           |</span><br><span class="line">+----[SHA256]-----+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ cat /root/.ssh/id_rsa.pub &gt;&gt; /root/.ssh/authorized_keys  //把公钥放进授权文件中去</span><br><span class="line"></span><br><span class="line">$ cd /root/.ssh</span><br><span class="line"></span><br><span class="line">$  chmod 600 authorized_keys</span><br><span class="line"></span><br><span class="line">$  chmod 700 ~/.ssh</span><br><span class="line"></span><br><span class="line">$  vim /etc/ssh/sshd_config</span><br><span class="line"></span><br><span class="line">RSAAuthentication yes</span><br><span class="line">PubkeyAuthentication yes</span><br><span class="line">PermitRootLogin yes   //另外，请留意 root 用户能否通过 SSH 登录，默认为yes：</span><br><span class="line"> </span><br><span class="line">当我们完成全部设置并以密钥方式登录成功后，可以禁用密码登录。这里我们先不禁用，先允许密码登陆</span><br><span class="line">PasswordAuthentication yes</span><br><span class="line">    </span><br><span class="line">$ service sshd restart //重启服务</span><br></pre></td></tr></table></figure><h5 id="客户端使用秘钥登录"><a href="#客户端使用秘钥登录" class="headerlink" title="客户端使用秘钥登录"></a>客户端使用秘钥登录</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. /root/.ssh/id_rsa 到Windwos桌面 更改为.pem文件 </span><br><span class="line">2.使用SecurtCRT SSH远程连接工具进行登录 </span><br><span class="line">3.登录成功后 请把/etc/ssh/sshd_config 文件中的PasswordAuthentication改为No 禁止密码进行远程登录 防止服务器被恶意SSH暴力破解攻击</span><br></pre></td></tr></table></figure><h6 id="服务器被攻击如图"><a href="#服务器被攻击如图" class="headerlink" title="服务器被攻击如图"></a>服务器被攻击如图</h6><p><img src="https://raw.githubusercontent.com/zhangChaoWrecked/pictures/master/LinuxLo&#39;ginWithPem.png" alt="相关截图"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h5 id=&quot;生成秘钥公钥&quot;&gt;&lt;a href=&quot;#生成秘钥公钥&quot; class=&quot;headerlink&quot; title=&quot;生成秘钥公钥&quot;&gt;&lt;/a&gt;生成秘钥公钥&lt;/h5&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gut
      
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="SSH" scheme="http://yoursite.com/tags/SSH/"/>
    
  </entry>
  
  <entry>
    <title>Linux  安装 Elasticsearch Kibana Logstash</title>
    <link href="http://yoursite.com/2019/11/02/Linux%20%20%E5%AE%89%E8%A3%85%20Elasticsearch%20Kibana%20Logstash/"/>
    <id>http://yoursite.com/2019/11/02/Linux  安装 Elasticsearch Kibana Logstash/</id>
    <published>2019-11-02T02:00:00.000Z</published>
    <updated>2019-11-04T10:38:44.154Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/zhangChaoWrecked/pictures/master/table.png" alt="相关截图"></p><p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/install-elasticsearch.html/" target="_blank" rel="noopener">各系统安装说明</a></p><p><img src="https://raw.githubusercontent.com/zhangChaoWrecked/pictures/master/elasticsearch.png" alt="相关截图"></p><h4 id="安装-ElasticSearch"><a href="#安装-ElasticSearch" class="headerlink" title="安装 ElasticSearch"></a>安装 ElasticSearch</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line">$ groupadd es  //使用 root 用户启动 elasticsearch 会报错,用 root 用户新建 es</span><br><span class="line"></span><br><span class="line">$ useradd -g es es //新建 es 用户，并添加到 es用户组</span><br><span class="line"></span><br><span class="line">$ passwd es  //设置 es 用户的用户密码，按照提示输入你的密码</span><br><span class="line"></span><br><span class="line">$ chown -R es:es /es //授权，我这里文件路径在 /es 下面</span><br><span class="line"></span><br><span class="line">$ vim /etc/sysctl.conf  //编辑</span><br><span class="line">   #添加一行</span><br><span class="line">   vm.max_map_count=655360</span><br><span class="line"> </span><br><span class="line">$ sysctl -p  //配置生效</span><br><span class="line"></span><br><span class="line">$ su es  //切换用户 </span><br><span class="line"></span><br><span class="line">$ mkdir  es</span><br><span class="line"></span><br><span class="line">$ cd es </span><br><span class="line"></span><br><span class="line">$ wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.7.0.tar.gz</span><br><span class="line"></span><br><span class="line">$ tar -zxvf elasticsearch-6.7.0.tar.gz //解压文件</span><br><span class="line"></span><br><span class="line">#es 作为集群，应该至少 3 个节点，这里服务器内存只有 2G，部署一个单机版 3 节点的伪集群</span><br><span class="line">$ mv elasticsearch-6.7.0-node elasticsearch-6.7.0-node1 //给文件夹改名</span><br><span class="line"></span><br><span class="line">#修改配置文件,默认值为 1g，我这里改为 160m，否则服务器带不动</span><br><span class="line">$ cd elasticsearch-6.7.0-node1</span><br><span class="line"></span><br><span class="line">$ vim config/jvm.options</span><br><span class="line">    -Xms160m</span><br><span class="line">    -Xmx160m</span><br><span class="line"></span><br><span class="line">$ mkdir elasticsearch-6.7.0-data1 //新建文件夹存放数据和日志，默认存放于 es 安装目录，为了防止误删和被覆盖，另建文件夹</span><br><span class="line"></span><br><span class="line">$ cd elasticsearch-6.7.0-data1/</span><br><span class="line"></span><br><span class="line">$ mkdir data logs</span><br><span class="line"></span><br><span class="line">#修改配置文件(https://www.cnblogs.com/zhq1007/p/8482454.html)</span><br><span class="line">$ cd /es/elasticsearch-6.7.0-node1/config/</span><br><span class="line">$ vim elasticsearch.yml</span><br><span class="line"> </span><br><span class="line">    cluster.name: 你的集群名称</span><br><span class="line">    node.name: node-1# 节点名称  其余两个节点分别为 node-2、node-3</span><br><span class="line">    node.master: true</span><br><span class="line">    node.data: true</span><br><span class="line">    bootstrap.memory_lock: true</span><br><span class="line">    path.data: /opt/fangzhibin/es670/elasticsearch-6.7.0-data1/data# 其余两个节点为 data2/data、data3/data</span><br><span class="line">    path.logs: /opt/fangzhibin/es670/elasticsearch-6.7.0-data1/logs # 其余两个节点为 data2/logs、data3/logs</span><br><span class="line">    network.host: 0.0.0.0</span><br><span class="line">    transport.tcp.port: 9301# 因为在同一台服务器，其余两个节点分别为 9302、9303</span><br><span class="line">    http.port: 9201   # 因为在同一台服务器，其余两个节点分别为 9202、9203</span><br><span class="line">    discovery.zen.ping.unicast.hosts: [&quot;节点IP:9301&quot;,&quot;节点IP:9302&quot;,&quot;节点IP:9303&quot;] # </span><br><span class="line">    discovery.zen.minimum_master_nodes: 2   # 根据主节点数量计算：主节点数量/2 + 1；3 个节点则设置为 2</span><br><span class="line"></span><br><span class="line">$ cd /es/elasticsearch-6.7.0-node1</span><br><span class="line">$ bin/elasticsearch -d</span><br><span class="line"></span><br><span class="line">#验证是否正常启动 node1（或者浏览器访问 http://你的IP:9201）</span><br><span class="line">curl &quot;http://你的IP:9201&quot;</span><br><span class="line">#出现以下内容即可，node2 和node3 同理</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;name&quot; : &quot;node-1&quot;,</span><br><span class="line">      &quot;cluster_name&quot; : &quot;cluster-aly&quot;,</span><br><span class="line">      &quot;cluster_uuid&quot; : &quot;RixPnO6hTQClAqxlAt_v2g&quot;,</span><br><span class="line">      &quot;version&quot; : &#123;</span><br><span class="line">        &quot;number&quot; : &quot;6.7.0&quot;,</span><br><span class="line">        &quot;build_flavor&quot; : &quot;default&quot;,</span><br><span class="line">        &quot;build_type&quot; : &quot;tar&quot;,</span><br><span class="line">        &quot;build_hash&quot; : &quot;8453f77&quot;,</span><br><span class="line">        &quot;build_date&quot; : &quot;2019-03-21T15:32:29.844721Z&quot;,</span><br><span class="line">        &quot;build_snapshot&quot; : false,</span><br><span class="line">        &quot;lucene_version&quot; : &quot;7.7.0&quot;,</span><br><span class="line">        &quot;minimum_wire_compatibility_version&quot; : &quot;5.6.0&quot;,</span><br><span class="line">        &quot;minimum_index_compatibility_version&quot; : &quot;5.0.0&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;tagline&quot; : &quot;You Know, for Search&quot;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">#正常启动 node1 后，复制节点</span><br><span class="line">$ cd /es</span><br><span class="line">$ cp -r elasticsearch-6.7.0-data1 elasticsearch-6.7.0-data2</span><br><span class="line">$ cp -r elasticsearch-6.7.0-node1 elasticsearch-6.7.0-node2</span><br><span class="line">$ cp -r elasticsearch-6.7.0-data1 elasticsearch-6.7.0-data3</span><br><span class="line">$ cp -r elasticsearch-6.7.0-node1 elasticsearch-6.7.0-node3</span><br><span class="line">#注意：按照上面的配置项说明更改 node2、node3 的配置文件</span><br><span class="line">#启动 node2 和 node3</span><br><span class="line">$ cd /es/elasticsearch-6.7.0-node2</span><br><span class="line">$ bin/elasticsearch -d</span><br><span class="line">$ cd /es/elasticsearch-6.7.0-node3</span><br><span class="line">$ bin/elasticsearch -d</span><br><span class="line">#验证是否正常启动，参考上面</span><br></pre></td></tr></table></figure><h5 id="elasticsearch-默认配置"><a href="#elasticsearch-默认配置" class="headerlink" title="elasticsearch 默认配置"></a>elasticsearch 默认配置</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#集群名称</span><br><span class="line">cluster.name: elasticsearch_production</span><br><span class="line"></span><br><span class="line">#该节点名称</span><br><span class="line">node.name: elasticsearch_001_data</span><br><span class="line"></span><br><span class="line">#数据存放目录</span><br><span class="line">path.data: /home/elasticsearch-6.7.0-data1/data</span><br><span class="line"></span><br><span class="line">#日志存放目录</span><br><span class="line">path.logs: /home/elasticsearch-6.7.0-data1/logs</span><br><span class="line"></span><br><span class="line">#是否可以被选举为master节点</span><br><span class="line">node.master: true</span><br><span class="line"></span><br><span class="line">#是否为data node</span><br><span class="line">node.data: true</span><br><span class="line"></span><br><span class="line">#端口</span><br><span class="line">http.port: 9200</span><br></pre></td></tr></table></figure><h4 id="安装-Kibana"><a href="#安装-Kibana" class="headerlink" title="安装 Kibana"></a>安装 Kibana</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">### Kibana 是一款开源的数据分析和可视化平台，它是 Elastic Stack 成员之一，设计用于和 Elasticsearch 协作。您可以使用 Kibana 对 Elasticsearch 索引中的数据进行搜索、查看、交互操作。您可以很方便的利用图表、表格及地图对数据进行多元化的分析和呈现。</span><br><span class="line"></span><br><span class="line">#同样使用 es 用户</span><br><span class="line">$ cd  /es</span><br><span class="line">$ wget https://artifacts.elastic.co/downloads/kibana/kibana-6.7.0-linux-x86_64.tar.gz</span><br><span class="line">$ tar -zxvf kibana-6.7.0-linux-x86_64.tar.gz</span><br><span class="line">$ mv kibana-6.7.0-linux-x86_64  kibana</span><br><span class="line">$ cd kibana</span><br><span class="line">$ vim config/kibana.yml</span><br><span class="line"># 更改如下配置</span><br><span class="line"># 配置参考官方文档：https://www.elastic.co/guide/cn/kibana/current/settings.html</span><br><span class="line">server.host: &quot;0.0.0.0&quot;  # 指定后端服务器的主机地址</span><br><span class="line">i18n.locale: &quot;zh-CN&quot; #汉化</span><br><span class="line">elasticsearch.hosts: [&quot;http://localhost:9201&quot;]  # 所有 Elasticsearch 实例的 URL，用逗号分隔</span><br><span class="line"></span><br><span class="line">$ nohup /es/kibana/bin/kibana  &gt; /es/kibana/kibana.log &amp; //启动 kibana 浏览器访问： http://Kibana服务器IP:5601</span><br></pre></td></tr></table></figure><h4 id="安装-Logstash"><a href="#安装-Logstash" class="headerlink" title="安装 Logstash"></a>安装 Logstash</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir /es/logstash</span><br><span class="line"></span><br><span class="line">$ cd /es/logstash</span><br><span class="line"></span><br><span class="line">$ wget https://artifacts.elastic.co/downloads/logstash/logstash-6.3.0.zip</span><br><span class="line"></span><br><span class="line">$ unzip logstash-6.3.0.zip</span><br><span class="line"></span><br><span class="line">$ mv logstash-6.3.0  logstash</span><br><span class="line"></span><br><span class="line">$ cd logstash  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ bin/logstash -f config/xxx.conf &gt; /es/logstash/logstash.log &amp; //启动  Logstash启动时需要指定配置监控日志策略的文件，xx.conf放在ELK\logstash\config目录下</span><br><span class="line">简单的配置说明</span><br><span class="line">input &#123;</span><br><span class="line"></span><br><span class="line">    tcp &#123;</span><br><span class="line"> </span><br><span class="line">    mode =&gt; &quot;server&quot;   #模式</span><br><span class="line"></span><br><span class="line">        host =&gt; &quot;localhost&quot;#服务器IP</span><br><span class="line"> </span><br><span class="line">        port =&gt; 900        #端口</span><br><span class="line"></span><br><span class="line">        codec =&gt; json_lines #JSON格式</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">output&#123;</span><br><span class="line"></span><br><span class="line">  elasticsearch &#123; </span><br><span class="line">     action =&gt; &quot;index&quot;          </span><br><span class="line"> hosts =&gt; [&quot;localhost:9200&quot;] #Elasticsearch服务的IP和端口  </span><br><span class="line"> index  =&gt; &quot;applog&quot;          #Kibana管理中搜索所使用的索引名 </span><br><span class="line"> </span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">  stdout &#123; codec =&gt; rubydebug &#125;        </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="最终效果图"><a href="#最终效果图" class="headerlink" title="最终效果图"></a>最终效果图</h4><p><img src="https://raw.githubusercontent.com/zhangChaoWrecked/pictures/master/ekl.png" alt="相关截图"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/zhangChaoWrecked/pictures/master/table.png&quot; alt=&quot;相关截图&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.elastic.c
      
    
    </summary>
    
      <category term="Elasticsearch" scheme="http://yoursite.com/categories/Elasticsearch/"/>
    
    
      <category term="Elasticsearch" scheme="http://yoursite.com/tags/Elasticsearch/"/>
    
      <category term="Logstash" scheme="http://yoursite.com/tags/Logstash/"/>
    
      <category term="Kibana" scheme="http://yoursite.com/tags/Kibana/"/>
    
  </entry>
  
  <entry>
    <title>Mysql 数据库表数据的快速迁移</title>
    <link href="http://yoursite.com/2019/09/18/Mysql%20%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E6%95%B0%E6%8D%AE%E7%9A%84%E5%BF%AB%E9%80%9F%E8%BF%81%E7%A7%BB/"/>
    <id>http://yoursite.com/2019/09/18/Mysql 数据库表数据的快速迁移/</id>
    <published>2019-09-18T07:11:08.000Z</published>
    <updated>2019-09-18T08:25:43.848Z</updated>
    
    <content type="html"><![CDATA[<h5 id="表数据迁移-前提-目标数据库和源数据库含有相同数据库名和表"><a href="#表数据迁移-前提-目标数据库和源数据库含有相同数据库名和表" class="headerlink" title="表数据迁移 (前提:目标数据库和源数据库含有相同数据库名和表)"></a>表数据迁移 (前提:目标数据库和源数据库含有相同数据库名和表)</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">mysql&gt; ALTER TABLE t_app_banner DISCARD TABLESPACE;  //目标数据库.ibd文件与原先的.frm文件解除绑定 </span><br><span class="line"></span><br><span class="line">$ cd /var/lib/mysql  //mysql数据库文件存放位置 在/etc/mysql/mysql.conf.d中查看</span><br><span class="line"></span><br><span class="line">$ ls</span><br><span class="line">auto.cnf  test  debian-5.7.flag  ib_buffer_pool  ibdata1  ib_logfile0  ib_logfile1  ibtmp1  mysql  performance_schema  sys</span><br><span class="line"></span><br><span class="line">$ls -lht</span><br><span class="line">total 144K</span><br><span class="line">-rw-r----- 1 mysql  mysql  9.1K Sep 18 08:00 t_app_banner.frm</span><br><span class="line">-rw-r----- 1 mysql  mysql    67 Sep 18 03:00 db.opt</span><br><span class="line">-rw-rw-r-- 1 mysql mysql 128K Sep 16 06:50 t_app_banner.ibd</span><br><span class="line"></span><br><span class="line">$ 复制要恢复表的.ibd文件 至目标数据库的相同目录下进行覆盖</span><br><span class="line"></span><br><span class="line">$cd /var/lib/mysql/test</span><br><span class="line">$ ls -lht</span><br><span class="line">total 144K</span><br><span class="line">-rw-r----- 1 mysql  mysql  9.1K Sep 18 08:00 t_app_banner.frm</span><br><span class="line">-rw-r----- 1 mysql  mysql    67 Sep 18 03:00 db.opt</span><br><span class="line">-rw-rw-r-- 1 ubuntu ubuntu 128K Sep 16 06:50 t_app_banner.ibd  //如果该文件使用者为ubuntu需要进行权限更改</span><br><span class="line"></span><br><span class="line">$ chown mysql:mysql /var/lib/mysql/test -R  //修改t_app_banner.ibd的授权用户</span><br><span class="line"></span><br><span class="line">$mysql&gt; ALTER TABLE t_app_banner IMPORT TABLESPACE; //恢复ibd和frm文件的关联</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h5 id=&quot;表数据迁移-前提-目标数据库和源数据库含有相同数据库名和表&quot;&gt;&lt;a href=&quot;#表数据迁移-前提-目标数据库和源数据库含有相同数据库名和表&quot; class=&quot;headerlink&quot; title=&quot;表数据迁移 (前提:目标数据库和源数据库含有相同数据库名和表)&quot;&gt;&lt;
      
    
    </summary>
    
      <category term="Mysql" scheme="http://yoursite.com/categories/Mysql/"/>
    
    
      <category term="Mysql" scheme="http://yoursite.com/tags/Mysql/"/>
    
  </entry>
  
  <entry>
    <title>Linux 安装Maven</title>
    <link href="http://yoursite.com/2019/08/30/Linux%20%E5%AE%89%E8%A3%85Maven/"/>
    <id>http://yoursite.com/2019/08/30/Linux 安装Maven/</id>
    <published>2019-08-30T03:00:08.000Z</published>
    <updated>2019-09-06T08:49:16.767Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://maven.apache.org/download.cgi" target="_blank" rel="noopener">Maven官网下载地址</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">$ wget http://mirrors.tuna.tsinghua.edu.cn/apache/maven/maven-3/3.6.2/binaries/apache-maven-3.6.2-bin.tar.gz</span><br><span class="line">--2019-09-06 16:35:40--  http://mirrors.tuna.tsinghua.edu.cn/apache/maven/maven-3/3.6.2/binaries/apache-maven-3.6.2-bin.tar.gz</span><br><span class="line">Resolving mirrors.tuna.tsinghua.edu.cn... 101.6.8.193, 2402:f000:1:408:8100::1</span><br><span class="line">Connecting to mirrors.tuna.tsinghua.edu.cn|101.6.8.193|:80... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 9142315 (8.7M) [application/x-gzip]</span><br><span class="line">Saving to: “apache-maven-3.6.2-bin.tar.gz”</span><br><span class="line"></span><br><span class="line">100%[================================================================================================================================================&gt;] 9,142,315    630K/s   in 16s     </span><br><span class="line"></span><br><span class="line">2019-09-06 16:35:56 (552 KB/s) - “apache-maven-3.6.2-bin.tar.gz” saved [9142315/9142315]</span><br><span class="line"></span><br><span class="line">$ ls</span><br><span class="line">apache-maven-3.6.2-bin.tar.gz bin include  jdk  lib  lib64  libexec  records  sbin  share  src</span><br><span class="line">$ tar zxvf apache-maven-3.6.2-bin.tar.gz </span><br><span class="line">$ mv apache-maven-3.6.2 maven</span><br><span class="line">$ vim /etc/profile //尾部添加 配置环境变量</span><br><span class="line">MAVEN_HOME=/usr/local/maven</span><br><span class="line">PATH=$PATH:$MAVEN_HOME/bin</span><br><span class="line">export MAVEN_HOME</span><br><span class="line">export PATH</span><br><span class="line">$ source /etc/profile</span><br><span class="line">$ mvn -v //验证是否安装成功</span><br><span class="line">Apache Maven 3.6.2 (40f52333136460af0dc0d7232c0dc0bcf0d9e117; 2019-08-27T23:06:16+08:00)</span><br><span class="line">Maven home: /usr/local/maven</span><br><span class="line">Java version: 1.8.0_45, vendor: Oracle Corporation, runtime: /usr/local/jdk/jre</span><br><span class="line">Default locale: en_US, platform encoding: UTF-8</span><br><span class="line">OS name: &quot;linux&quot;, version: &quot;2.6.32-754.12.1.el6.x86_64&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://maven.apache.org/download.cgi&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Maven官网下载地址&lt;/a&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table
      
    
    </summary>
    
      <category term="Maven" scheme="http://yoursite.com/categories/Maven/"/>
    
    
      <category term="Maven" scheme="http://yoursite.com/tags/Maven/"/>
    
  </entry>
  
  <entry>
    <title>Linux 安装Jenkins、Linux启动多个Tomcat、安装JDK</title>
    <link href="http://yoursite.com/2019/08/30/Linux%20%E5%AE%89%E8%A3%85Jenkins%E3%80%81Linux%E5%90%AF%E5%8A%A8%E5%A4%9A%E4%B8%AATomcat%E3%80%81%E5%AE%89%E8%A3%85JDK/"/>
    <id>http://yoursite.com/2019/08/30/Linux 安装Jenkins、Linux启动多个Tomcat、安装JDK/</id>
    <published>2019-08-30T03:00:08.000Z</published>
    <updated>2019-10-30T08:46:22.573Z</updated>
    
    <content type="html"><![CDATA[<h3 id="安装Java-略"><a href="#安装Java-略" class="headerlink" title="安装Java(略)"></a>安装Java(略)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">$ tar zxvf  jdk-8u231-linux-x64.tar.gz   //下载  jdk-8u231-linux-x64.tar.gz  解压到/usr/local/java</span><br><span class="line"></span><br><span class="line">$ vim /etc/profile </span><br><span class="line"></span><br><span class="line">配置环境变量 </span><br><span class="line">export JAVA_HOME=/usr/local/java</span><br><span class="line">export JRE_HOME=$&#123;JAVA_HOME&#125;/jre    </span><br><span class="line">export CLASSPATH=.:$&#123;JAVA_HOME&#125;/lib:$&#123;JRE_HOME&#125;/lib    </span><br><span class="line">export PATH=$&#123;JAVA_HOME&#125;/bin:$PATH</span><br><span class="line"></span><br><span class="line">$ source /etc/profile</span><br><span class="line"></span><br><span class="line">$ java -version</span><br><span class="line">java version &quot;1.8.0_45&quot;</span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_45-b14)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.45-b02, mixed mode)</span><br><span class="line"></span><br><span class="line">$ echo $JAVA_HOME   ##输出Java安装目录</span><br><span class="line">/usr/local/jdk</span><br></pre></td></tr></table></figure><h3 id="Linux启动多个Tomcat"><a href="#Linux启动多个Tomcat" class="headerlink" title="Linux启动多个Tomcat"></a>Linux启动多个Tomcat</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">$ vim /etx/profile</span><br><span class="line"></span><br><span class="line">##########first tomcat###########</span><br><span class="line">CATALINA_BASE=/home/tomcat-1</span><br><span class="line">CATALINA_HOME=/home/tomcat-1</span><br><span class="line">TOMCAT_HOME=/home/tomcat-1</span><br><span class="line">export CATALINA_BASE CATALINA_HOME TOMCAT_HOME</span><br><span class="line">##########first tomcat###########</span><br><span class="line"></span><br><span class="line">##########second tomcat##########</span><br><span class="line">CATALINA2_BASE=/home/tomcat-2</span><br><span class="line">CATALINA2_HOME=/home/tomcat-2</span><br><span class="line">TOMCAT2_HOME=/home/tomcat-2</span><br><span class="line">export CATALINA2_BASE CATALINA2_HOME TOMCAT2_HOME</span><br><span class="line">##########second tomcat##########</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$  vim /home/tomcat-data/bin/catalina.sh  //找到OS specific support 在下面添加</span><br><span class="line"># OS specific support.  $var _must_ be set to either true or false.</span><br><span class="line">export CATALINA_BASE=$CATALINA2_BASE</span><br><span class="line">export CATALINA_HOME=$CATALINA2_HOME</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$  vim /home/tomcat-2/conf/server.xml   // 修改 conf/server.xml 修改关闭端口 监听端口 访问端口</span><br></pre></td></tr></table></figure><h3 id="Ubuntu-安装jenkins"><a href="#Ubuntu-安装jenkins" class="headerlink" title="Ubuntu 安装jenkins"></a>Ubuntu 安装jenkins</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">$ wget -q -O - https://pkg.jenkins.io/debian/jenkins.io.key | sudo apt-key add -</span><br><span class="line">$ sudo sh -c &apos;echo deb http://pkg.jenkins.io/debian-stable binary/ &gt; /etc/apt/sources.list.d/jenkins.list&apos;</span><br><span class="line">$ sudo apt-get update</span><br><span class="line">$ sudo apt-get install jenkins</span><br><span class="line">$ service jenkins status  //jenkins服务状态</span><br><span class="line">$ service jenkins stop    //启动jenkins</span><br><span class="line">$ service jenkins start  //停止jenkins</span><br><span class="line">$ service jenkins restart //重启jenkins</span><br><span class="line">$  vim /etc/default/jenkins  //修改以下属性为root </span><br><span class="line"># user and group to be invoked as (default to jenkins)</span><br><span class="line">JENKINS_USER=root</span><br><span class="line">JENKINS_GROUP=root</span><br><span class="line">$ find / -name &quot;jenkins&quot; //查找jenkins目录 进行root授权</span><br><span class="line">$ chown -R root:root /usr/share/jenkins</span><br><span class="line">$ chown -R root:root /usr/share/doc/jenkins</span><br><span class="line">$ chown -R root:root /etc/init.d/jenkins</span><br><span class="line">$ chown -R root:root /etc/default/jenkins</span><br><span class="line">$ chown -R root:root /etc/logrotate.d/jenkins</span><br><span class="line">$ chown -R root:root /var/lib/jenkins</span><br><span class="line">$ chown -R root:root /var/cache/jenkins</span><br><span class="line">$ chown -R root:root /var/log/jenkins</span><br><span class="line">$ service jenkins stop //重启jenkins</span><br><span class="line">如果你的`/etc/init.d/jenkins`文件无法启动Jenkins，编辑`/etc/default/jenkins`， 修改 ----HTTP_PORT=8080----`为----HTTP_PORT=8081----` 在这里，“8081”也可被换为其他可用端口。</span><br><span class="line">ln -s /opt/jdk1.8.0_201/bin/java /usr/bin/java //创建java软连接</span><br></pre></td></tr></table></figure><h3 id="centos版本-安装Jenkins"><a href="#centos版本-安装Jenkins" class="headerlink" title="centos版本 安装Jenkins"></a>centos版本 安装Jenkins</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">$ sudo wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.repo</span><br><span class="line">$ sudo rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io.key</span><br><span class="line">$ yum install jenkins</span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">Setting up Install Process</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line">jenkins                                                                                                                             | 2.9 kB     00:00     </span><br><span class="line">jenkins/primary_db                                                                                                                  |  29 kB     00:00     </span><br><span class="line">Resolving Dependencies</span><br><span class="line">--&gt; Running transaction check</span><br><span class="line">---&gt; Package jenkins.noarch 0:2.176.3-1.1 will be installed</span><br><span class="line">--&gt; Finished Dependency Resolution</span><br><span class="line"></span><br><span class="line">Dependencies Resolved</span><br><span class="line"></span><br><span class="line">===========================================================================================================================================================</span><br><span class="line"> Package                             Arch                               Version                                  Repository                           Size</span><br><span class="line">===========================================================================================================================================================</span><br><span class="line">Installing:</span><br><span class="line"> jenkins                             noarch                             2.176.3-1.1                              jenkins                              74 M</span><br><span class="line"></span><br><span class="line">Transaction Summary</span><br><span class="line">===========================================================================================================================================================</span><br><span class="line">Install       1 Package(s)</span><br><span class="line"></span><br><span class="line">Total download size: 74 M</span><br><span class="line">Installed size: 74 M</span><br><span class="line">Is this ok [y/N]: y</span><br><span class="line">Downloading Packages:</span><br><span class="line">jenkins-2.176.3-1.1.noarch.rpm                                                                                                      |  74 MB     00:26     </span><br><span class="line">Running rpm_check_debug</span><br><span class="line">Running Transaction Test</span><br><span class="line">Transaction Test Succeeded</span><br><span class="line">Running Transaction</span><br><span class="line">  Installing : jenkins-2.176.3-1.1.noarch                                                                                                              1/1 </span><br><span class="line">  Verifying  : jenkins-2.176.3-1.1.noarch                                                                                                              1/1 </span><br><span class="line"></span><br><span class="line">Installed:</span><br><span class="line">  jenkins.noarch 0:2.176.3-1.1                                                                                                                             </span><br><span class="line"></span><br><span class="line">Complete!</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ service jenkins start //启动Jenkins</span><br><span class="line">Starting Jenkins bash: /usr/bin/java: No such file or directory</span><br><span class="line">                                                           [FAILED]</span><br><span class="line">说明该目录下没有配置Java                                                               </span><br><span class="line">$  vi /etc/sysconfig/jenkins      //修改一下默认端口(8080)和启动用户</span><br><span class="line">JENKINS_USER=&quot;root&quot;</span><br><span class="line">JENKINS_PORT=&quot;8081&quot;</span><br><span class="line">$  echo $JAVA_HOME   ##输出Java安装目录</span><br><span class="line">/usr/local/jdk</span><br><span class="line">$  vim  /etc/init.d/jenkins </span><br><span class="line">candidates=</span><br><span class="line">/etc/alternatives/java</span><br><span class="line">/usr/lib/jvm/java-1.8.0/bin/java</span><br><span class="line">/usr/lib/jvm/jre-1.8.0/bin/java</span><br><span class="line">/usr/lib/jvm/java-1.7.0/bin/java</span><br><span class="line">/usr/lib/jvm/jre-1.7.0/bin/java</span><br><span class="line">/usr/lib/jvm/java-11.0/bin/java</span><br><span class="line">/usr/lib/jvm/jre-11.0/bin/java</span><br><span class="line">/usr/lib/jvm/java-11-openjdk-amd64</span><br><span class="line">/usr/bin/java</span><br><span class="line">/usr/local/jdk/bin/java   //增加Java安装目录</span><br><span class="line"></span><br><span class="line">$ service jenkins start  //启动jenkins 成功</span><br><span class="line">Starting Jenkins              </span><br><span class="line">                                                    [  OK  ]</span><br><span class="line">$ cat /var/lib/jenkins/secrets/initialAdminPassword</span><br><span class="line">62ce0816e3c24d9aa3fac37a9a39fb4r</span><br></pre></td></tr></table></figure><h6 id="在浏览器输入ip-8080进入Jenkins登录页面。如图："><a href="#在浏览器输入ip-8080进入Jenkins登录页面。如图：" class="headerlink" title="在浏览器输入ip:8080进入Jenkins登录页面。如图："></a>在浏览器输入ip:8080进入Jenkins登录页面。如图：</h6><p><img src="https://raw.githubusercontent.com/zhangChaoWrecked/pictures/master/startJenkins.png" alt="如图"></p><p><img src="https://raw.githubusercontent.com/zhangChaoWrecked/pictures/master/isntallPlugns.png" alt="如图"></p><h6 id="出现一下情况"><a href="#出现一下情况" class="headerlink" title="出现一下情况"></a>出现一下情况</h6><p><img src="https://raw.githubusercontent.com/zhangChaoWrecked/pictures/master/nonetword.png" alt="如图"></p><p><img src="https://raw.githubusercontent.com/zhangChaoWrecked/pictures/master/updatesite.png" alt="如图"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">解决方法： http://ip:8080/pluginManager/advanced  Update Site 下的 http://updates.jenkins.io/update-center.json 修改为 https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json </span><br><span class="line">之后 在浏览器输入  http://ip:8080/restart 再进入 http://ip:8080登陆即可正常</span><br><span class="line"></span><br><span class="line">$  service jenkins start  //如果还不行 进行重启</span><br></pre></td></tr></table></figure></p><p><img src="https://raw.githubusercontent.com/zhangChaoWrecked/pictures/master/install.png" alt="如图"></p><p><img src="https://raw.githubusercontent.com/zhangChaoWrecked/pictures/master/adduser.png" alt="如图"></p><p><img src="https://raw.githubusercontent.com/zhangChaoWrecked/pictures/master/ready.png" alt="如图"></p><h6 id="如果出现登陆成功卡在空白页面-输入http-ip-8080-restart-进行重启-或-service-jenkins-start"><a href="#如果出现登陆成功卡在空白页面-输入http-ip-8080-restart-进行重启-或-service-jenkins-start" class="headerlink" title="如果出现登陆成功卡在空白页面 输入http://ip:8080/restart 进行重启 或  service jenkins start"></a>如果出现登陆成功卡在空白页面 输入<a href="http://ip:8080/restart" target="_blank" rel="noopener">http://ip:8080/restart</a> 进行重启 或  service jenkins start</h6><!--##### jdk配置 --><!--![如图](https://raw.githubusercontent.com/zhangChaoWrecked/pictures/master/globalSettings.png)-->]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;安装Java-略&quot;&gt;&lt;a href=&quot;#安装Java-略&quot; class=&quot;headerlink&quot; title=&quot;安装Java(略)&quot;&gt;&lt;/a&gt;安装Java(略)&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td 
      
    
    </summary>
    
      <category term="Jenkins" scheme="http://yoursite.com/categories/Jenkins/"/>
    
    
      <category term="Jenkins" scheme="http://yoursite.com/tags/Jenkins/"/>
    
  </entry>
  
  <entry>
    <title>Mysql开启log_bin并进行数据恢复</title>
    <link href="http://yoursite.com/2019/08/29/Mysql%E5%BC%80%E5%90%AFlog_bin%E5%B9%B6%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E6%81%A2%E5%A4%8D/"/>
    <id>http://yoursite.com/2019/08/29/Mysql开启log_bin并进行数据恢复/</id>
    <published>2019-08-29T07:11:08.000Z</published>
    <updated>2019-08-29T10:23:43.013Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Mysql开启binlog"><a href="#Mysql开启binlog" class="headerlink" title="Mysql开启binlog"></a>Mysql开启binlog</h3><table><thead><tr><th>日志类型</th><th>写入日志的信息</th></tr></thead><tbody><tr><td>错误日志</td><td>记录在启动，运行或停止mysqld时遇到的问题</td></tr><tr><td>通用查询日志</td><td>记录建立的客户端连接和执行的语句</td></tr><tr><td>二进制日志</td><td>记录更改数据的语句</td></tr><tr><td>中继日志</td><td>从复制主服务器接收的数据更改</td></tr><tr><td>慢查询日志</td><td>记录所有执行时间超过 long_query_time 秒的所有查询或不使用索引的查询</td></tr><tr><td>DDL日志(元数据日志)</td><td>元数据操作由DDL语句执行</td></tr></tbody></table><p>本文主要介绍二进制日志 binlog。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">Binlog日志的两个最重要的使用场景</span><br><span class="line"></span><br><span class="line">1.MySQL主从复制：MySQL Replication在Master端开启binlog，Master把它的二进制日志传递给slaves来达到master-slave数据一致的目的</span><br><span class="line">2.数据恢复：通过使用 mysqlbinlog工具来使恢复数据</span><br><span class="line"></span><br><span class="line">启用binlog，通过配置 /etc/my.cnf 或 /etc/mysql/mysql.conf.d/mysqld.cnf </span><br><span class="line"></span><br><span class="line">$ vim /etc/mysql/mysql.conf.d/mysqld.cnf </span><br><span class="line"></span><br><span class="line">$ service mysql restart //重启Mysql</span><br><span class="line"></span><br><span class="line">$ mysql -u root -p    </span><br><span class="line">mysql&gt; show binary logs;</span><br><span class="line">1381 - You are not using binary logging</span><br><span class="line">mysql&gt; show binary logs;</span><br><span class="line">+------------------+-----------+</span><br><span class="line">| Log_name         | File_size |</span><br><span class="line">+------------------+-----------+</span><br><span class="line">| mysql-bin.000001 |       154 |</span><br><span class="line">+------------------+-----------+</span><br><span class="line">1 row in set (0.15 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show binary logs;</span><br><span class="line">+------------------+-----------+</span><br><span class="line">| Log_name         | File_size |</span><br><span class="line">+------------------+-----------+</span><br><span class="line">| mysql-bin.000001 |       154 |</span><br><span class="line">+------------------+-----------+</span><br><span class="line">1 row in set (0.03 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt;  delete from t_iost_2019_04;  //开启binlog后删除数据库一张表的数据</span><br><span class="line">Query OK, 13244 rows affected (0.30 sec)</span><br><span class="line">mysql&gt; show master status; //查看目前的binlog文件</span><br><span class="line">+------------------+----------+--------------+------------------+-------------------+</span><br><span class="line">| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |</span><br><span class="line">+------------------+----------+--------------+------------------+-------------------+</span><br><span class="line">| mysql-bin.000001 |  2006168 | dapp         |                  |                   |</span><br><span class="line">+------------------+----------+--------------+------------------+-------------------+</span><br><span class="line">1 row in set (0.04 sec)</span><br><span class="line"></span><br><span class="line">首先我们安装binlog2sql：</span><br><span class="line"></span><br><span class="line">$  git clone https://github.com/danfengcao/binlog2sql.git &amp;&amp; cd binlog2sql</span><br><span class="line">$  pip install -r requirements.txt</span><br><span class="line">$  cd binlog2sql</span><br><span class="line">$  ls -lht</span><br><span class="line">total 64K</span><br><span class="line">drwxr-xr-x 2 root root 4.0K Aug 29 17:50 binlog2sql</span><br><span class="line">drwxr-xr-x 2 root root 4.0K Aug 29 17:50 example</span><br><span class="line">-rw-r--r-- 1 root root  35K Aug 29 17:50 LICENSE</span><br><span class="line">-rw-r--r-- 1 root root 9.3K Aug 29 17:50 README.md</span><br><span class="line">-rw-r--r-- 1 root root   54 Aug 29 17:50 requirements.txt</span><br><span class="line">drwxr-xr-x 2 root root 4.0K Aug 29 17:50 tests</span><br><span class="line">$  pip install -r requirements.txt</span><br><span class="line">$  python binlog2sql/binlog2sql.py -h 127.0.0.1 -P 3306 -u admin -p&apos;admin&apos; -dtest -tuser --start-file=&apos;mysql-bin.000001&apos; --start-datetime=&apos;2019-08-26 00:00:00&apos; --stop-datetime=&apos;2019-08-26 18:00:00&apos; &gt; /tmp/raw.sql ##大致范围查找</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$  python binlog2sql/binlog2sql.py -h127.0.0.1 -P3306 -uadmin -p&apos;admin&apos; -dtest -tuser --start-file=&apos;mysql-bin.000054&apos; --start-position=257427 --stop-position=504272 -B &gt; /tmp/rollback.sql #找到要恢复sql的起始位置</span><br><span class="line"></span><br><span class="line">#命令解释： h 数据库ip p 数据库端口 u 账号 p 密码 d 目标库 t 表明  start-file binlog文件名  start-datetime 开始时间  stop-datetime 结束时间 &gt; 输出到指定文件  start-position 开始位置  stop-position 结束位置  B生成回滚sql</span><br><span class="line"></span><br><span class="line">$  mysql -h 127.0.0.1 -P 3306 -u admin  &lt; /tmp/rollback.sql //执行回滚SQL数据的恢复</span><br><span class="line"></span><br><span class="line">mysql&gt; select count(*) from t_iost_2019_04;  #查询恢复结果</span><br><span class="line">+----------+</span><br><span class="line">| count(*) |</span><br><span class="line">+----------+</span><br><span class="line">|    13244 |</span><br><span class="line">+----------+</span><br><span class="line">1 row in set (0.17 sec)</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/zhangChaoWrecked/pictures/master/mysqlbinlog.png" alt="如图"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;Mysql开启binlog&quot;&gt;&lt;a href=&quot;#Mysql开启binlog&quot; class=&quot;headerlink&quot; title=&quot;Mysql开启binlog&quot;&gt;&lt;/a&gt;Mysql开启binlog&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;日志类型
      
    
    </summary>
    
      <category term="Mysql" scheme="http://yoursite.com/categories/Mysql/"/>
    
    
      <category term="Mysql" scheme="http://yoursite.com/tags/Mysql/"/>
    
  </entry>
  
  <entry>
    <title>Nginx 安装</title>
    <link href="http://yoursite.com/2019/08/22/Nginx%E5%AE%89%E8%A3%85/"/>
    <id>http://yoursite.com/2019/08/22/Nginx安装/</id>
    <published>2019-08-22T07:11:08.000Z</published>
    <updated>2019-10-31T09:57:01.658Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://nginx.org/en/download.html" target="_blank" rel="noopener"> Nginx下载地址</a></p><h4 id="apt安装"><a href="#apt安装" class="headerlink" title="apt安装"></a>apt安装</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ apt-get install nginx</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">/usr/sbin/nginx ： 主程序位置</span><br><span class="line"></span><br><span class="line">/etc/nginx：nginx文件配置</span><br><span class="line"></span><br><span class="line">/usr/share/nginx：存放静态文件</span><br><span class="line"></span><br><span class="line">/var/log/nginx：存放日志</span><br><span class="line"></span><br><span class="line">/etc/init.d/nginx start    启动Nginx</span><br><span class="line"></span><br><span class="line">/etc/init.d/nginx restart  重启Nginx </span><br><span class="line"></span><br><span class="line">service nginx status       Nginx状态</span><br><span class="line">   </span><br><span class="line">service nginx restart      重启Nginx</span><br></pre></td></tr></table></figure><h4 id="源码安装"><a href="#源码安装" class="headerlink" title="源码安装"></a>源码安装</h4><h6 id="安装gcc-g-的依赖库"><a href="#安装gcc-g-的依赖库" class="headerlink" title="安装gcc g++的依赖库"></a>安装gcc g++的依赖库</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ apt-get install build-essential</span><br><span class="line">$ apt-get install libtool</span><br></pre></td></tr></table></figure><h6 id="复制代码安装-pcre依赖库"><a href="#复制代码安装-pcre依赖库" class="headerlink" title="复制代码安装 pcre依赖库"></a>复制代码安装 pcre依赖库</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ apt-get update</span><br><span class="line">$ apt-get install libpcre3 libpcre3-dev</span><br></pre></td></tr></table></figure><h6 id="zlib依赖库-ssl依赖库"><a href="#zlib依赖库-ssl依赖库" class="headerlink" title="zlib依赖库   ssl依赖库"></a>zlib依赖库   ssl依赖库</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$  apt-get install zlib1g-dev</span><br><span class="line"></span><br><span class="line">$  apt-get install openssl</span><br></pre></td></tr></table></figure><h6 id="安装nginx"><a href="#安装nginx" class="headerlink" title="安装nginx"></a>安装nginx</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#下载最新版本：</span><br><span class="line">wget http://nginx.org/download/nginx-1.11.3.tar.gz</span><br><span class="line">#解压：</span><br><span class="line">tar -zxvf nginx-1.11.3.tar.gz</span><br><span class="line">#进入解压目录：</span><br><span class="line">cd nginx-1.11.3</span><br><span class="line">#配置：</span><br><span class="line">./configure --prefix=/usr/local/nginx </span><br><span class="line">#编辑nginx：</span><br><span class="line">make</span><br><span class="line">注意：这里可能会报错，提示“pcre.h No such file or directory”,具体详见：http://stackoverflow.com/questions/22555561/error-building-fatal-error-pcre-h-no-such-file-or-directory</span><br><span class="line">需要安装 libpcre3-dev,命令为：sudo apt-get install libpcre3-dev</span><br><span class="line">#安装nginx：</span><br><span class="line">sudo make install</span><br><span class="line">#启动nginx：</span><br><span class="line">sudo /usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf</span><br><span class="line">注意：-c 指定配置文件的路径，不加的话，nginx会自动加载默认路径的配置文件，可以通过 -h查看帮助命令。</span><br><span class="line"></span><br><span class="line">#查看nginx进程：</span><br><span class="line">ps -ef|grep nginx</span><br></pre></td></tr></table></figure><h5 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ./sbin/nginx -s reload  #重新加载配置</span><br><span class="line">$ ./sbin/nginx -s stop    #停止Nginx</span><br><span class="line">$ /usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf #启动</span><br></pre></td></tr></table></figure><h5 id="安装Nginx脚本"><a href="#安装Nginx脚本" class="headerlink" title="安装Nginx脚本"></a>安装Nginx脚本</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install -y build-essential</span><br><span class="line">path=$(pwd)</span><br><span class="line">echo &quot;Download nginx....&quot;</span><br><span class="line">  wget http://nginx.org/download/nginx-1.14.2.tar.gz</span><br><span class="line">  tar -zxvf nginx-1.14.2.tar.gz</span><br><span class="line">echo &quot;Download openssl&quot;</span><br><span class="line">  wget https://www.openssl.org/source/openssl-1.0.2r.tar.gz</span><br><span class="line">  tar -zxf  openssl-1.0.2r.tar.gz</span><br><span class="line">echo &quot;Download pcre&quot;</span><br><span class="line">  wget https://ftp.pcre.org/pub/pcre/pcre-8.42.tar.gz  </span><br><span class="line">  tar -zxf pcre-8.42.tar.gz</span><br><span class="line">  cd pcre-8.42/</span><br><span class="line">  ./configure &amp;&amp; make &amp;&amp;make install</span><br><span class="line">  cd ..</span><br><span class="line">echo &quot;Download zlib&quot;</span><br><span class="line">  wget http://zlib.net/zlib-1.2.11.tar.gz</span><br><span class="line">  tar -zxf zlib-1.2.11.tar.gz</span><br><span class="line">  cd zlib-1.2.11/</span><br><span class="line">  ./configure &amp;&amp; make &amp;&amp; make install</span><br><span class="line">  cd ..</span><br><span class="line">echo &quot;编译 nginx...&quot;</span><br><span class="line">cd nginx-1.14.2/ &amp;&amp; ./configure --prefix=$path/nginx --with-pcre=$path/pcre-8.42/   --with-zlib=$path/zlib-1.2.11/   --with-http_ssl_module --with-openssl=$path/openssl-1.0.2r/  --with-stream --with-stream_ssl_module  --with-http_v2_module --with-threads &amp;&amp; make &amp;&amp; make install</span><br></pre></td></tr></table></figure><h4 id="配置文件详解"><a href="#配置文件详解" class="headerlink" title="配置文件详解"></a>配置文件详解</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br></pre></td><td class="code"><pre><span class="line">...                            #全局块</span><br><span class="line">events&#123;                        #events 块</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line">http&#123;                          #http 块</span><br><span class="line">    ...                        #http 全局块</span><br><span class="line">    server&#123;                    #server 块</span><br><span class="line">        ...                    #server 全局块</span><br><span class="line">        location [PATTERN]&#123;    #location 块</span><br><span class="line">            ...</span><br><span class="line">        &#125;</span><br><span class="line">        location [PATTERN]&#123;    #location 块</span><br><span class="line">            ...</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    server&#123;                    #server 块</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">    ...                        #http 全局块</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   1.全局块</span><br><span class="line">　　全局块是默认配置文件从开始到events块之间的一部分内容，主要设置一些影响Nginx服务器整体运行的配置指令，因此，这些指令的作用域是Nginx服务器全局。</span><br><span class="line">　　通常包括配置运行Nginx 服务器的用户（组）、允许生成的worker process数、Nginx 进程 PID存放路径、日志的存放路径和类型以及配置文件引入等。</span><br><span class="line">　　2.events 块</span><br><span class="line">　　events 块涉及的指令主要影响Nginx 服务器与用户的网络连接。常用到的设置包括是否开启对多worker process下的网络连接进行序列化，是否允许同时接收多个网络连接，选取哪种事件驱动模型处理连接请求，每个 worker process可以同时支持的最大连接数等。</span><br><span class="line">　　这一部分指令对 Nginx服务器的性能影响较大，在实际配置中应该根据实际情况灵活调整。</span><br><span class="line">　　3.http 块</span><br><span class="line">　　http块是Nginx 服务器配置中的重要部分，代理、缓存和日志定义等绝大多数的功能和第三方模块的配置都可以放在这个模块。可以在 http全局块中配置的指令包括文件引入、MIME-Type定义、日志自定义、是否使用sendfile传输文件、连接超时时间、单连接q 请求数上限等。</span><br><span class="line">　　4.server 块</span><br><span class="line">　　server 块和“虚拟主机”的概念有密切联系。在 server 全局块中，最常见的两个配置项是本虚拟主机的监听配置和本虚拟主机的名称或 IP 配置。</span><br><span class="line">　　5.location 块</span><br><span class="line">　　location 块的主要作用是，基于Nginx服务器接受到的q 请求字符串，对除虚拟主机名称之外的字符串j 进行匹配，对特定的请求进行处理。地址定向、数据缓存和应答控制等功能都是在这部分实现。许多第三方模块的配置也是在location块中提供功能。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#普通配置</span><br><span class="line">#==性能配置</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#运行用户</span><br><span class="line">user nobody;</span><br><span class="line">#pid文件</span><br><span class="line">pid logs/nginx.pid;</span><br><span class="line"></span><br><span class="line">#Nginx基于事件的非阻塞多路复用模型（epoll或kquene）</span><br><span class="line">#一个进程在短时间内可以响应大量请求，工作进程设置与cpu数相同，避免cpu在多个进程间切换增加开销</span><br><span class="line">#==worker进程数，通常设置&lt;=CPU数量，auto为自动检测，一般设置最大8个即可，再大性能提升较小或不稳定</span><br><span class="line">worker_processes auto;</span><br><span class="line"></span><br><span class="line">#==将每个进程绑定到特定cpu上，避免进程在cpu间切换的开销</span><br><span class="line">worker_cpu_affinity 00000001 00000010 00000100 00001000 00010000 00100000 01000000 10000000;</span><br><span class="line"></span><br><span class="line">#==worker进程打开最大文件数，可CPU*10000设置，或设置系统最大数量655350</span><br><span class="line">worker_rlimit_nofile 102400;</span><br><span class="line">#全局错误日志</span><br><span class="line">error_log  logs/error.log;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#events模块中包含nginx中所有处理连接的设置，并发响应能力的关键配置</span><br><span class="line">events &#123;</span><br><span class="line">    #==每个进程同时打开的最大连接数（最大并发数）</span><br><span class="line">    worker_connections 102400;</span><br><span class="line">    </span><br><span class="line">    #==告诉nginx收到一个新链接通知后接受尽可能多的链接</span><br><span class="line">    #multi_accept on;</span><br><span class="line">    </span><br><span class="line">    #一般http 1.1协议下，浏览器默认使用两个并发链接</span><br><span class="line">    #如果是反向代理，nginx需要和客户端保持连接，还需要和后端服务器保持连接</span><br><span class="line">    #Http服务器时，设置max_client=worker_processes*worker_connections/2</span><br><span class="line">    #反向代理时，设置max_client=worker_processes*worker_connections/4    </span><br><span class="line">    #==最大可用客户端数</span><br><span class="line">    #max_client </span><br><span class="line">    </span><br><span class="line">    #==使用非阻塞模型，设置复用客户端线程的轮训方法</span><br><span class="line">    use epoll;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#http模块控制着nginx http处理的所有核心特性</span><br><span class="line">http &#123;</span><br><span class="line">    #打开或关闭错误页面中的nginx版本号等信息</span><br><span class="line">    server_tokens on;</span><br><span class="line">    #!server_tag on;</span><br><span class="line">    #!server_info on;</span><br><span class="line">    #==优化磁盘IO设置，指定nginx是否调用sendfile函数来输出文件，普通应用设为on，下载等磁盘IO高的应用，可设为off</span><br><span class="line">    sendfile on;</span><br><span class="line">    </span><br><span class="line">    #缓存发送请求，启用如下两个配置，会在数据包达到一定大小后再发送数据</span><br><span class="line">    #这样会减少网络通信次数，降低阻塞概率，但也会影响响应的及时性</span><br><span class="line">    #比较适合于文件下载这类的大数据包通信场景</span><br><span class="line">    #tcp_nopush on;</span><br><span class="line">    #tcp_nodelay on;</span><br><span class="line"></span><br><span class="line">    #==设置nginx是否存储访问日志，关闭这个可以让读取磁盘IO操作更快</span><br><span class="line">    access_log on;</span><br><span class="line">    #设置nginx只记录严重错误，可减少IO压力</span><br><span class="line">    #error_log logs/error.log crit;</span><br><span class="line"></span><br><span class="line">    #Http1.1支持长连接</span><br><span class="line">    #降低每个链接的alive时间可在一定程度上提高响应连接数量</span><br><span class="line">    #==给客户端分配keep-alive链接超时时间</span><br><span class="line">    keepalive_timeout 30;</span><br><span class="line"></span><br><span class="line">    #设置用户保存各种key的共享内存的参数，5m指的是5兆</span><br><span class="line">    limit_conn_zone $binary_remote_addr zone=addr:5m;</span><br><span class="line">    #为给定的key设置最大的连接数，这里的key是addr，设定的值是100，就是说允许每一个IP地址最多同时打开100个连接</span><br><span class="line">    limit_conn addr 100;</span><br><span class="line"></span><br><span class="line">    #include指在当前文件中包含另一个文件内容</span><br><span class="line">    include mime.types;</span><br><span class="line">    #设置文件使用默认的mine-type</span><br><span class="line">    default_type text/html;</span><br><span class="line">    #设置默认字符集</span><br><span class="line">    charset UTF-8;</span><br><span class="line"></span><br><span class="line">    #==设置nginx采用gzip压缩的形式发送数据，减少发送数据量，但会增加请求处理时间及CPU处理时间，需要权衡</span><br><span class="line">    gzip on;</span><br><span class="line">    #==加vary给代理服务器使用，针对有的浏览器支持压缩，有个不支持，根据客户端的HTTP头来判断是否需要压缩</span><br><span class="line">    gzip_vary on;</span><br><span class="line">    #nginx在压缩资源之前，先查找是否有预先gzip处理过的资源</span><br><span class="line">    #!gzip_static on;</span><br><span class="line">    #为指定的客户端禁用gzip功能</span><br><span class="line">    gzip_disable &quot;MSIE[1-6]\.&quot;;</span><br><span class="line">    #允许或禁止压缩基于请求和相应的响应流，any代表压缩所有请求</span><br><span class="line">    gzip_proxied any;</span><br><span class="line">    #==启用压缩的最少字节数，如果请求小于1024字节则不压缩，压缩过程会消耗系统资源</span><br><span class="line">    gzip_min_length 1024;</span><br><span class="line">    #==数据压缩等级，1-9之间，9最慢压缩比最大，压缩比越大对系统性能要求越高</span><br><span class="line">    gzip_comp_level 2;</span><br><span class="line">    #需要压缩的数据格式</span><br><span class="line">    gzip_types text/plain text/css text/xml text/javascript  application/json application/x-javascript application/xml application/xml+rss; </span><br><span class="line"></span><br><span class="line">    #静态文件缓存</span><br><span class="line">    #==开启缓存的同时也指定了缓存文件的最大数量，20s如果文件没有被请求则删除缓存</span><br><span class="line">    open_file_cache max=100000 inactive=20s;</span><br><span class="line">    #==多长时间检查一次缓存的有效期</span><br><span class="line">    open_file_cache_valid 30s;</span><br><span class="line">    #==有效期内缓存文件最小的访问次数，只有访问超过2次的才会被缓存</span><br><span class="line">    open_file_cache_min_uses 2;</span><br><span class="line">    #当搜索一个文件时是否缓存错误信息</span><br><span class="line">    open_file_cache_errors on;</span><br><span class="line"></span><br><span class="line">    #==允许客户端请求的最大单文件字节数</span><br><span class="line">    client_max_body_size 4m;</span><br><span class="line">    #==客户端请求头缓冲区大小</span><br><span class="line">    client_header_buffer_size 4k;</span><br><span class="line"></span><br><span class="line">    #是否启用对发送给客户端的URL进行修改</span><br><span class="line">    proxy_redirect off;</span><br><span class="line">    #后端的Web服务器可以通过X-Forwarded-For获取用户真实IP</span><br><span class="line">    proxy_set_header Host $host;</span><br><span class="line">    proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">    #==nginx跟后端服务器连接超时时间(代理连接超时)</span><br><span class="line">    proxy_connect_timeout 60;</span><br><span class="line">    #==连接成功后，后端服务器响应时间(代理接收超时)</span><br><span class="line">    proxy_read_timeout 120;</span><br><span class="line">    #==后端服务器数据回传时间(代理发送超时)</span><br><span class="line">    proxy_send_timeout 20;</span><br><span class="line">    #==设置代理服务器（nginx）保存用户头信息的缓冲区大小</span><br><span class="line">    proxy_buffer_size 32k;</span><br><span class="line">    #==proxy_buffers缓冲区，网页平均在32k以下的设置</span><br><span class="line">    proxy_buffers 4 128k;</span><br><span class="line">    #==高负荷下缓冲大小（proxy_buffers*2）</span><br><span class="line">    proxy_busy_buffers_size 256k;</span><br><span class="line">    #==设定缓存文件夹大小，大于这个值，将从upstream服务器传</span><br><span class="line">    proxy_temp_file_write_size 256k;</span><br><span class="line">    #==1G内存缓冲空间，3天不用删除，最大磁盘缓冲空间2G</span><br><span class="line">    proxy_cache_path /home/cache levels=1:2 keys_zone=cache_one:1024m inactive=3d max_size=2g;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    #设定负载均衡服务器列表</span><br><span class="line">    upstream nginx.test.com&#123;</span><br><span class="line">        #后端服务器访问规则</span><br><span class="line">        #ip_hash;</span><br><span class="line">        #weight参数表示权重值，权值越高被分配到的几率越大</span><br><span class="line">        #server 10.11.12.116:80 weight=5;</span><br><span class="line">        #PC_Local</span><br><span class="line">        server 10.11.12.116:80;</span><br><span class="line">        #PC_Server</span><br><span class="line">        server 10.11.12.112:80;</span><br><span class="line">        #Notebook</span><br><span class="line">        #server 10.11.12.106:80;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    #server代表虚拟主机，可以理解为站点（挂载多个站点，只需要配置多个server及upstream节点即可）</span><br><span class="line">    server &#123;</span><br><span class="line">        #监听80端口</span><br><span class="line">        listen 80;</span><br><span class="line">        #识别的域名，定义使用nginx.test.com访问</span><br><span class="line">        server_name nginx.test.com;</span><br><span class="line">        #设定本虚拟主机的访问日志</span><br><span class="line">        access_log logs/nginx.test.com.access.log;</span><br><span class="line">        </span><br><span class="line">        #一个域名下匹配多个URI的访问，使用location进行区分，后面紧跟着的/代表匹配规则</span><br><span class="line">        #如动态资源访问和静态资源访问会分别指向不同的位置的应用场景</span><br><span class="line">        #</span><br><span class="line">        # 基本语法规则：location [=|~|~*|^~] /uri/ &#123;...&#125; </span><br><span class="line">        # = 开头表示精确匹配</span><br><span class="line">        # ^~ 开头表示uri以某个常规字符串开头，匹配成功后不再进行正则匹配</span><br><span class="line">        # ~ 开头表示区分大小写的正则匹配</span><br><span class="line">        # ~* 开头表示不区分大小写的正则匹配</span><br><span class="line">        # !~ 开头表示区分大小写的不匹配的正则</span><br><span class="line">        # !~* 开头表示不区分大小写的不匹配的正则</span><br><span class="line">        # / 通用匹配，任何请求都会被匹配到</span><br><span class="line">        #</span><br><span class="line">        # 理解如下：</span><br><span class="line">        # 有两种匹配模式：普通字符串匹配，正则匹配</span><br><span class="line">        # 无开头引导字符或以=开头表示普通字符串匹配</span><br><span class="line">        # 以~或~*开头表示正则匹配，~*表示不区分大小写</span><br><span class="line">        # 【多个location时，先匹配普通字符串location，再匹配正则location】</span><br><span class="line">        # 只识别URI部分，例如请求为“/test/1/abc.do?arg=xxx”</span><br><span class="line">        # （1）先查找是否有=开头的精确匹配，即“location=/test/1/abc.do &#123;...&#125;”</span><br><span class="line">        # （2）再查找普通匹配，以“最大前缀”为规则，如有以下两个location</span><br><span class="line">        #    location /test/ &#123;...&#125;</span><br><span class="line">        #    location /test/1/ &#123;...&#125;</span><br><span class="line">        #    则匹配后一项</span><br><span class="line">        # （3）匹配到一个普通location后，搜索并未结束，而是暂存当前结果，并继续进行正则搜索</span><br><span class="line">        # （4）在所有正则location中找到第一个匹配项后，以此匹配项为最终结果</span><br><span class="line">        # 【所以正则匹配项，匹配规则受定义前后顺序影响，但普通匹配不会】</span><br><span class="line">        # （5）如果未找到正则匹配项，则以（3）中缓存的结果为最终结果</span><br><span class="line">        # （6）如果一个匹配都没有，则返回404</span><br><span class="line">        # location =/ &#123;...&#125;与location / &#123;...&#125;的差别</span><br><span class="line">        # 前一个是精确匹配，只响应“/”的请求，所有“/xxx”形式的请求不会以“前缀匹配形式”匹配到它</span><br><span class="line">        # 后一个正相反，所有请求必然都是以“/”开头，所以没有其他匹配结果时一定会执行到它</span><br><span class="line">        # location ^~ / &#123;...&#125; ^~的意思是禁止正则匹配，表示匹配到此项后不再进行后续的正则搜索</span><br><span class="line">        # 相当于普通匹配模式匹配成功后就以此结果为最终结果，停止进行后续的正则匹配</span><br><span class="line">        location / &#123;</span><br><span class="line">            #定义服务器的默认网站根目录位置，可以写相对路径，也可以写绝对路径</span><br><span class="line">            root html;</span><br><span class="line">            #定义首页索引文件的名称</span><br><span class="line">            index index.html index.htm;</span><br><span class="line">            #定义转发后端负载服务器组</span><br><span class="line">            proxy_pass http://nginx.test.com;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        #定义错误提示页面</span><br><span class="line">        error_page 500 502 503 504 /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root html;</span><br><span class="line">        &#125;</span><br><span class="line">        #静态文件，nginx自己处理</span><br><span class="line">        location ~ ^/(images|javascript|js|css|flash|media|static)/&#123;</span><br><span class="line">            root /var/www/virtual/htdocs;</span><br><span class="line">            #过期时间1天</span><br><span class="line">            expires 1d;</span><br><span class="line">            #关闭媒体文件日志</span><br><span class="line">            access_log off;</span><br><span class="line">            log_not_found off;</span><br><span class="line">        &#125;</span><br><span class="line">        #设定查看Nginx状态的地址</span><br><span class="line">        location /NginxStatus &#123;</span><br><span class="line">            #!stub_status on; #无此关键字</span><br><span class="line">            access_log off;</span><br><span class="line">            auth_basic &quot;NginxStatus&quot;;</span><br><span class="line">            auth_basic_user_file conf/htpasswd;</span><br><span class="line">        &#125;</span><br><span class="line">        #禁止访问的文件.htxxx</span><br><span class="line">        location ~ /\.ht &#123;</span><br><span class="line">            #deny all;禁止访问，返回403</span><br><span class="line">            deny all;</span><br><span class="line">            #allow all;允许访问</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    #网站较多的情况下ngxin又不会请求瓶颈可以考虑挂多个站点，并把虚拟主机配置单独放在一个文件内，引入进来</span><br><span class="line">    #include website.conf;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://nginx.org/en/download.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt; Nginx下载地址&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&quot;apt安装&quot;&gt;&lt;a href=&quot;#apt安装&quot; class=&quot;hea
      
    
    </summary>
    
      <category term="Nginx" scheme="http://yoursite.com/categories/Nginx/"/>
    
    
      <category term="Nginx" scheme="http://yoursite.com/tags/Nginx/"/>
    
  </entry>
  
  <entry>
    <title>Linux时区更改</title>
    <link href="http://yoursite.com/2019/07/18/Linux%E6%97%B6%E5%8C%BA%E6%9B%B4%E6%94%B9/"/>
    <id>http://yoursite.com/2019/07/18/Linux时区更改/</id>
    <published>2019-07-18T06:42:18.000Z</published>
    <updated>2019-07-18T08:36:40.095Z</updated>
    
    <content type="html"><![CDATA[<h3 id="时区查看"><a href="#时区查看" class="headerlink" title="时区查看"></a>时区查看</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">1.tzselect命令无法修改时区，仅给出时区的城市表示法</span><br><span class="line"></span><br><span class="line">2.TZ变量和/etc/localtime文件会影响时区，并建议直接修改/etc/localtime文件</span><br><span class="line"></span><br><span class="line">3.如果在shell中临时需要变更时区信息，可以修改TZ变量实现。</span><br><span class="line"></span><br><span class="line">4.在profile文件里设置变量TZ，达到和修改/etc/localtime类似的效果。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ tzselect</span><br><span class="line"></span><br><span class="line">Please identify a location so that time zone rules can be set correctly.</span><br><span class="line">Please select a continent, ocean, &quot;coord&quot;, or &quot;TZ&quot;.</span><br><span class="line"> 1) Africa</span><br><span class="line"> 2) Americas</span><br><span class="line"> 3) Antarctica</span><br><span class="line"> 4) Asia</span><br><span class="line"> 5) Atlantic Ocean</span><br><span class="line"> 6) Australia</span><br><span class="line"> 7) Europe</span><br><span class="line"> 8) Indian Ocean</span><br><span class="line"> 9) Pacific Ocean</span><br><span class="line">10) coord - I want to use geographical coordinates.</span><br><span class="line">11) TZ - I want to specify the time zone using the Posix TZ format.</span><br><span class="line">#? 4</span><br><span class="line">Please select a country whose clocks agree with yours.</span><br><span class="line"> 1) Afghanistan           18) Israel                35) Palestine</span><br><span class="line"> 2) Armenia               19) Japan                 36) Philippines</span><br><span class="line"> 3) Azerbaijan            20) Jordan                37) Qatar</span><br><span class="line"> 4) Bahrain               21) Kazakhstan            38) Russia</span><br><span class="line"> 5) Bangladesh            22) Korea (North)         39) Saudi Arabia</span><br><span class="line"> 6) Bhutan                23) Korea (South)         40) Singapore</span><br><span class="line"> 7) Brunei                24) Kuwait                41) Sri Lanka</span><br><span class="line"> 8) Cambodia              25) Kyrgyzstan            42) Syria</span><br><span class="line"> 9) China                 26) Laos                  43) Taiwan</span><br><span class="line">10) Cyprus                27) Lebanon               44) Tajikistan</span><br><span class="line">11) East Timor            28) Macau                 45) Thailand</span><br><span class="line">12) Georgia               29) Malaysia              46) Turkmenistan</span><br><span class="line">13) Hong Kong             30) Mongolia              47) United Arab Emirates</span><br><span class="line">14) India                 31) Myanmar (Burma)       48) Uzbekistan</span><br><span class="line">15) Indonesia             32) Nepal                 49) Vietnam</span><br><span class="line">16) Iran                  33) Oman                  50) Yemen</span><br><span class="line">17) Iraq                  34) Pakistan</span><br><span class="line">#? 9</span><br><span class="line">Please select one of the following time zone regions.</span><br><span class="line">1) Beijing Time</span><br><span class="line">2) Xinjiang Time</span><br><span class="line">#? 1</span><br><span class="line"></span><br><span class="line">The following information has been given:</span><br><span class="line"></span><br><span class="line">        China</span><br><span class="line">        Beijing Time</span><br><span class="line"></span><br><span class="line">Therefore TZ=&apos;Asia/Shanghai&apos; will be used.</span><br><span class="line">Local time is now:      Thu Jul 18 15:54:50 CST 2019.</span><br><span class="line">Universal Time is now:  Thu Jul 18 07:54:50 UTC 2019.</span><br><span class="line">Is the above information OK?</span><br><span class="line">1) Yes</span><br><span class="line">2) No</span><br><span class="line">#? yes</span><br><span class="line">Please enter a number in range.</span><br><span class="line">#? yes</span><br><span class="line">Please enter a number in range.</span><br><span class="line">#? 1</span><br><span class="line"></span><br><span class="line">You can make this change permanent for yourself by appending the line</span><br><span class="line">        TZ=&apos;Asia/Shanghai&apos;; export TZ</span><br><span class="line">to the file &apos;.profile&apos; in your home directory; then log out and log in again.</span><br><span class="line"></span><br><span class="line">Here is that TZ value again, this time on standard output so that you</span><br><span class="line">can use the /usr/bin/tzselect command in shell scripts:</span><br><span class="line">Asia/Shanghai</span><br><span class="line">curl http://ifconfig.me</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/zhangChaoWrecked/pictures/master/tss.png" alt="image"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">$ cat  /etc/profile   //在文件末尾追加时区 export TZ=Asia/Shanghai </span><br><span class="line"># /etc/profile: system-wide .profile file for the Bourne shell (sh(1))</span><br><span class="line"></span><br><span class="line"># and Bourne compatible shells (bash(1), ksh(1), ash(1), ...).</span><br><span class="line"></span><br><span class="line">if [ &quot;$PS1&quot; ]; then</span><br><span class="line">  if [ &quot;$BASH&quot; ] &amp;&amp; [ &quot;$BASH&quot; != &quot;/bin/sh&quot; ]; then</span><br><span class="line">    # The file bash.bashrc already sets the default PS1.</span><br><span class="line">    # PS1=&apos;\h:\w\$ &apos;</span><br><span class="line">    if [ -f /etc/bash.bashrc ]; then</span><br><span class="line">      . /etc/bash.bashrc</span><br><span class="line">    fi</span><br><span class="line">  else</span><br><span class="line">    if [ &quot;`id -u`&quot; -eq 0 ]; then</span><br><span class="line">      PS1=&apos;# &apos;</span><br><span class="line">    else</span><br><span class="line">      PS1=&apos;$ &apos;</span><br><span class="line">    fi</span><br><span class="line">  fi</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">if [ -d /etc/profile.d ]; then</span><br><span class="line">  for i in /etc/profile.d/*.sh; do</span><br><span class="line">    if [ -r $i ]; then</span><br><span class="line">      . $i</span><br><span class="line">    fi</span><br><span class="line">  done</span><br><span class="line">  unset i</span><br><span class="line">fi</span><br><span class="line">export JAVA_HOME=/usr/local/java/jdk1.8.0_211</span><br><span class="line">export JRE_HOME=$&#123;JAVA_HOME&#125;/jre</span><br><span class="line">export CLASSPATH=.:$&#123;JAVA_HOME&#125;/lib:$&#123;JRE_HOME&#125;/lib:$CLASSPATH</span><br><span class="line">export JAVA_PATH=$&#123;JAVA_HOME&#125;/bin:$&#123;JRE_HOME&#125;/bin</span><br><span class="line">export PATH=$PATH:$&#123;JAVA_PATH&#125;</span><br><span class="line">export TZ=Asia/Shanghai   </span><br><span class="line"></span><br><span class="line">$ source /etc/profile //生效文件</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;时区查看&quot;&gt;&lt;a href=&quot;#时区查看&quot; class=&quot;headerlink&quot; title=&quot;时区查看&quot;&gt;&lt;/a&gt;时区查看&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pr
      
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="Linux" scheme="http://yoursite.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>搭建简单的文件下载服务器</title>
    <link href="http://yoursite.com/2019/06/18/%E6%90%AD%E5%BB%BA%E7%AE%80%E5%8D%95%E7%9A%84%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    <id>http://yoursite.com/2019/06/18/搭建简单的文件下载服务器/</id>
    <published>2019-06-18T04:00:00.000Z</published>
    <updated>2019-06-18T09:31:18.949Z</updated>
    
    <content type="html"><![CDATA[<h4 id="apache2"><a href="#apache2" class="headerlink" title="[apache2]"></a>[apache2]</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ root@user: apt-getinstall apache2  //配置文件地址 /etc/apache2/sites-enabled/000-default</span><br><span class="line"></span><br><span class="line">$ root@user: cd /var/www/html/  //并在此目录放入要下载的文件</span><br><span class="line"></span><br><span class="line">$ root@user: rm -f index.html  //删除该文件</span><br><span class="line"></span><br><span class="line">$ root@user: curl cip.cc   //获取服务器外网IP 通过浏览器访问 如图 </span><br><span class="line"></span><br><span class="line">$ root@user:  /etc/init.d/apache2 restart //重启Apache2 $ root@user:  /etc/init.d/apache2 stop  //停止Apache2</span><br></pre></td></tr></table></figure><p> <img src="https://raw.githubusercontent.com/zhangChaoWrecked/pictures/master/apache.png" alt="image"></p><h4 id="Nginx"><a href="#Nginx" class="headerlink" title="[Nginx]"></a>[Nginx]</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">$ root@user: apt-getinstall nginx  //配置文件地址 /etc/nginx/nginx.conf  在nginx.conf末尾有一句：include /etc/nginx/conf.d/*.conf;　　推荐把用户自己的配置放到conf.d/</span><br><span class="line"></span><br><span class="line">$ root@user: vim /etc/nginx/conf.d/default.conf  //添加用户的自定义配置文件</span><br><span class="line">   autoindex on;# 显示目录</span><br><span class="line">   autoindex_exact_size on;# 显示文件大小</span><br><span class="line">   autoindex_localtime on;# 显示文件时间</span><br><span class="line">$ root@user: vim /etc/nginx/nginx.conf           //在http 增加以下配置</span><br><span class="line">  </span><br><span class="line">  server &#123;</span><br><span class="line">     listen       8080 default_server;</span><br><span class="line">     listen       [::]:8080 default_server;</span><br><span class="line">     server_name  _;</span><br><span class="line">     root         /root/share/; //分项目录</span><br><span class="line"></span><br><span class="line">     # Load configuration files for the default server block.</span><br><span class="line">     include /etc/nginx/default.d/*.conf;</span><br><span class="line"></span><br><span class="line">     location / &#123;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     error_page 404 /404.html;</span><br><span class="line">         location = /40x.html &#123;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     error_page 500 502 503 504 /50x.html;</span><br><span class="line">         location = /50x.html &#123;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">$ root@user: /etc/init.d/nginx reload 重新加载</span><br><span class="line"></span><br><span class="line">$ root@user: curl cip.cc   //获取服务器外网IP 通过浏览器访问 如图 </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">错误日志    /var/log/nginx/error.log</span><br><span class="line">访问日志    /var/log/nginx/access.log</span><br></pre></td></tr></table></figure><p> <img src="https://raw.githubusercontent.com/zhangChaoWrecked/pictures/master/nginx.png" alt="image"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;apache2&quot;&gt;&lt;a href=&quot;#apache2&quot; class=&quot;headerlink&quot; title=&quot;[apache2]&quot;&gt;&lt;/a&gt;[apache2]&lt;/h4&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td cl
      
    
    </summary>
    
    
      <category term="Linux" scheme="http://yoursite.com/tags/Linux/"/>
    
      <category term="apache" scheme="http://yoursite.com/tags/apache/"/>
    
  </entry>
  
  <entry>
    <title>Mysql 安装</title>
    <link href="http://yoursite.com/2019/06/14/Mysql%20%E5%AE%89%E8%A3%85/"/>
    <id>http://yoursite.com/2019/06/14/Mysql 安装/</id>
    <published>2019-06-14T07:11:08.000Z</published>
    <updated>2019-09-18T08:26:03.993Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/zhangChaoWrecked/pictures/master/微信图片_20190614150319.png" alt=" Mysql安装地址"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">//下载mysql-apt-config_0.8.13-1_all.deb 到Linux </span><br><span class="line"></span><br><span class="line">$apt-get update  </span><br><span class="line"></span><br><span class="line">$mkdir mysql</span><br><span class="line"></span><br><span class="line">$cd mysql</span><br><span class="line"></span><br><span class="line">//安装</span><br><span class="line">$apt-get install mysql-server</span><br><span class="line"></span><br><span class="line">//查看Mysql服务状态</span><br><span class="line">$ service mysql status</span><br><span class="line"></span><br><span class="line">//重启Mysql</span><br><span class="line">$service mysql restart</span><br><span class="line"></span><br><span class="line">//查看Mysql端口占用</span><br><span class="line">$netstat -tunlp | grep 3306</span><br><span class="line"></span><br><span class="line">//进行安装初始化设置密码等操作</span><br><span class="line">$ mysql_secure_installation</span><br><span class="line"></span><br><span class="line">//设置 Linux服务器数据库可以在任意服务器上远程连接</span><br><span class="line">$ mysql -u root -p               </span><br><span class="line">mysql&gt; show databases;</span><br><span class="line">mysql&gt; use mysql;</span><br><span class="line">mysql&gt; select host, user from user;</span><br><span class="line">mysql&gt; update user set host = &apos;%&apos; where user = &apos;root&apos;;</span><br><span class="line">mysql&gt; flush privileges;</span><br><span class="line">mysql&gt; exit;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">从命令行终端运行此命令，将在寻找Linux/BSD / OS X系统中的MySQL配置文件 my.cnf 文件：</span><br><span class="line"></span><br><span class="line">mysql --help | grep &apos;Default options&apos; -A 1</span><br><span class="line">上面命令执行后，会有这样的输出：</span><br><span class="line"></span><br><span class="line">Default options are read from the following files in the given order:</span><br><span class="line">/etc/my.cnf /etc/mysql/my.cnf   </span><br><span class="line">/usr/local/etc/my.cnf </span><br><span class="line">~/.my.cnf</span><br><span class="line">/etc/mysql/mysql.conf.d  mysql配置文件</span><br><span class="line">现在，可以检查你正在使用的 my.cnf 文件是否存在。在 Mac OS X 中默认式没有 my.cnf 文件的。你可以从这个地方复制一份过去 /usr/local/mysql/support-files/my-default.cnf 每个版本都不一样，你只需要找到一个 .cnf</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/zhangChaoWrecked/pictures/master/微信图片_20190614150319.png&quot; alt=&quot; Mysql安装地址&quot;&gt;&lt;/p&gt;
&lt;figure class
      
    
    </summary>
    
      <category term="Mysql" scheme="http://yoursite.com/categories/Mysql/"/>
    
    
      <category term="Mysql" scheme="http://yoursite.com/tags/Mysql/"/>
    
  </entry>
  
  <entry>
    <title>Linux 系统搭建Redis</title>
    <link href="http://yoursite.com/2019/06/13/Linux%20%E7%B3%BB%E7%BB%9F%E6%90%AD%E5%BB%BARedis/"/>
    <id>http://yoursite.com/2019/06/13/Linux 系统搭建Redis/</id>
    <published>2019-06-13T08:00:00.000Z</published>
    <updated>2019-06-13T07:10:02.519Z</updated>
    
    <content type="html"><![CDATA[<h4 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir redis       //创建redis目录</span><br><span class="line"></span><br><span class="line">$ wget http://download.redis.io/releases/redis-5.0.5.tar.gz  //下载安装包</span><br><span class="line"></span><br><span class="line">$ tar xzf redis-5.0.5.tar.gz //解压</span><br><span class="line"> </span><br><span class="line">$ cd redis-5.0.5    //进入redis-5.0.5目录</span><br><span class="line"> </span><br><span class="line">$ make             //生成有效文件</span><br><span class="line"></span><br><span class="line">$ cd src          </span><br><span class="line"></span><br><span class="line">$ ./redis-server   //1.启动redis服务 这种方式启动redis 使用的是默认配置</span><br><span class="line"></span><br><span class="line">$ ./redis-cli</span><br><span class="line">redis&gt; set foo bar</span><br><span class="line">OK</span><br><span class="line">redis&gt; get foo</span><br><span class="line">&quot;bar&quot;</span><br><span class="line"></span><br><span class="line">$ vim ../redis.conf //编辑Redis配置文件</span><br><span class="line"></span><br><span class="line">$ ./redis-server ../redis.conf   //2.使用指定配置文件使用下面命令启动</span><br></pre></td></tr></table></figure><h5 id="redis-配置文件详解"><a href="#redis-配置文件详解" class="headerlink" title="redis 配置文件详解"></a>redis 配置文件详解</h5><table><thead><tr><th>fields</th><th>desc</th></tr></thead><tbody><tr><td>daemonize</td><td>no 默认情况下，redis不是在后台运行的，如果需要在后台运行，把该项的值更改为yes</td></tr><tr><td>port</td><td>指定redis运行的端口，默认是6379</td></tr><tr><td>bind</td><td>指定redis只接收来自于该IP地址的请求，如果不进行设置，那么将处理所有请求，在生产环境中最好设置该项</td></tr><tr><td>timeout</td><td>设置客户端连接时的超时时间，单位为秒。当客户端在这段时间内没有发出任何指令，那么关闭该连接 0是关闭此设置</td></tr><tr><td>loglevel</td><td># debu 记录很多信息，用于开发和测试 varbose    有用的信息，不像debug会记录那么多 notice 普通的verbose，常用于生产环境 warning 只有非常重要或者严重的信息会记录到日志 </td></tr><tr><td>logfile</td><td>/var/log/redis/redis.log 配置log文件地址 默认值为stdout，标准输出，若后台模式会输出到/dev/null</td></tr><tr><td>rdbcompression</td><td>yes 存储至本地数据库时（持久化到rdb文件）是否压缩数据，默认为yes</td></tr><tr><td>dbfilename</td><td>dump.rdb 本地持久化数据库文件名，默认值为dump.rdb</td></tr><tr><td>requirepass</td><td>foobared 设置客户端连接后进行任何其他指定前需要使用的密码。</td></tr><tr><td>save <seconds> <changes></changes></seconds></td><td>指定在多长时间内，有多少次更新操作，就将数据同步到数据文件，可以多个条件配合 save 900 1 900秒（15分钟）内有1个更改</td></tr></tbody></table><h5 id="windows-Redis-Desktop-Manager-连接不上Redis的问题"><a href="#windows-Redis-Desktop-Manager-连接不上Redis的问题" class="headerlink" title="windows Redis Desktop Manager 连接不上Redis的问题"></a>windows Redis Desktop Manager 连接不上Redis的问题</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. ufw status 查看Redis 6379 端口是否开启 未开启则 ：ufw allow 6379(Redis默认端口 修改默认端口到redis.conf修改)</span><br><span class="line"></span><br><span class="line">2. 云平台安全组是否开启了Redis 6379 端口</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/zhangChaoWrecked/pictures/master/aliyun.png" alt=" 云平台安全组是否开启了Redis端口"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;Installation&quot;&gt;&lt;a href=&quot;#Installation&quot; class=&quot;headerlink&quot; title=&quot;Installation&quot;&gt;&lt;/a&gt;Installation&lt;/h4&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;
      
    
    </summary>
    
      <category term="Redis" scheme="http://yoursite.com/categories/Redis/"/>
    
    
      <category term="Redis" scheme="http://yoursite.com/tags/Redis/"/>
    
  </entry>
  
  <entry>
    <title>常见问题汇总</title>
    <link href="http://yoursite.com/2019/06/13/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/"/>
    <id>http://yoursite.com/2019/06/13/常见问题汇总/</id>
    <published>2019-06-13T04:39:31.000Z</published>
    <updated>2019-06-13T07:04:07.797Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h2><h5 id="cmmand-redis-cli-not-found"><a href="#cmmand-redis-cli-not-found" class="headerlink" title="cmmand redis-cli  not found"></a>cmmand redis-cli  not found</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">root@wrecked:~# redis-cli -h 127.0.0.1 -p 6379 -a 123456</span><br><span class="line">Command &apos;redis-cli&apos; not found</span><br><span class="line"></span><br><span class="line">解决办法：cp /home/redis/redis-2.8.17/src/redis-cli /usr/local/bin/</span><br><span class="line">         拷贝redis-cli 到 /usr/local/bin/</span><br><span class="line">         </span><br><span class="line">         </span><br><span class="line">`/usr/bin`下面的都是系统预装的可执行程序，会随着系统升级而改变。</span><br><span class="line">`/usr/local/bin`目录是给用户放置自己的可执行程序的地方，推荐放在这里，不会被系统升级而覆盖同名文件。</span><br></pre></td></tr></table></figure><h5 id="buntu防火墙的开启，关闭，端口的打开，查看"><a href="#buntu防火墙的开启，关闭，端口的打开，查看" class="headerlink" title="buntu防火墙的开启，关闭，端口的打开，查看"></a>buntu防火墙的开启，关闭，端口的打开，查看</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">1.防火墙的打开</span><br><span class="line"></span><br><span class="line">$ ufw enable</span><br><span class="line"></span><br><span class="line">2.防火墙的重启</span><br><span class="line"></span><br><span class="line">$ ufw reload</span><br><span class="line"></span><br><span class="line">3.打开想要的端口（以9000为例）</span><br><span class="line"></span><br><span class="line">$ ufw allow 9000</span><br><span class="line"></span><br><span class="line">4.查看本机端口使用情况</span><br><span class="line"></span><br><span class="line">$ ufw status</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Linux&quot;&gt;&lt;a href=&quot;#Linux&quot; class=&quot;headerlink&quot; title=&quot;Linux&quot;&gt;&lt;/a&gt;Linux&lt;/h2&gt;&lt;h5 id=&quot;cmmand-redis-cli-not-found&quot;&gt;&lt;a href=&quot;#cmmand-redis-cl
      
    
    </summary>
    
      <category term="问题" scheme="http://yoursite.com/categories/%E9%97%AE%E9%A2%98/"/>
    
    
      <category term="Linux" scheme="http://yoursite.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Linux系统配置</title>
    <link href="http://yoursite.com/2019/06/11/Linux%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE/"/>
    <id>http://yoursite.com/2019/06/11/Linux系统配置/</id>
    <published>2019-06-11T06:42:18.000Z</published>
    <updated>2019-06-11T10:37:20.280Z</updated>
    
    <content type="html"><![CDATA[<h4 id="基础概念"><a href="#基础概念" class="headerlink" title="基础概念"></a>基础概念</h4><ul><li><p><strong>物理CPU</strong>：物理CPU就是插在主机上的真实的CPU硬件，在Linux下可以数不同的physical id 来确认主机的物理CPU个数。</p></li><li><p><strong>核心数</strong>：物理CPU下一层概念就是核心数，我们常常会听说多核处理器，其中的核指的就是核心数。在Linux下可以通过cores来确认主机的物理CPU的核心数。</p></li><li><strong>逻辑CPU</strong>：核心数下一层的概念是逻辑CPU，逻辑CPU跟超线程技术有联系，假如物理CPU不支持超线程的，那么逻辑CPU的数量等于核心数的数量；<br> 如果物理CPU支持超线程，那么逻辑CPU的数目是核心数数目的两倍。在Linux下可以通过 processors 的数目来确认逻辑CPU的数量。</li><li><strong>超线程</strong>：超线程是英特尔开发出来的一项技术，使得单个处理器可以象两个逻辑处理器那样运行，这样单个处理器以并行执行线程。<br> 这里的单个处理器也可以理解为CPU的一个核心；这样便可以理解为什么开启了超线程技术后，<code>逻辑CPU的数目是核心数的两倍了</code>。</li></ul><h5 id="查看物理CPU数量"><a href="#查看物理CPU数量" class="headerlink" title="查看物理CPU数量"></a>查看物理CPU数量</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/cpuinfo | grep &apos;physical id&apos; | uniq |wc -l</span><br></pre></td></tr></table></figure><h5 id="查看核心数"><a href="#查看核心数" class="headerlink" title="查看核心数"></a>查看核心数</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/cpuinfo | grep &apos;core id&apos; | uniq |wc -l</span><br></pre></td></tr></table></figure><h5 id="查看逻辑CPU数目"><a href="#查看逻辑CPU数目" class="headerlink" title="查看逻辑CPU数目"></a>查看逻辑CPU数目</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">top命令中看到的CPU数目是逻辑CPU（输入top后再按1）。</span><br><span class="line"></span><br><span class="line">cat /proc/cpuinfo | grep &apos;processor&apos; | wc -l</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/zhangChaoWrecked/pictures/master/_20190611182743.png" alt="相关截图"></p><h5 id="查看内存大小-硬盘大小"><a href="#查看内存大小-硬盘大小" class="headerlink" title="查看内存大小 硬盘大小"></a>查看内存大小 硬盘大小</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/meminfo |grep MemTotal //内存大小</span><br><span class="line">fdisk -l |grep Disk //硬盘大小</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/zhangChaoWrecked/pictures/master/20190611183238.png" alt="相关截图"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;基础概念&quot;&gt;&lt;a href=&quot;#基础概念&quot; class=&quot;headerlink&quot; title=&quot;基础概念&quot;&gt;&lt;/a&gt;基础概念&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;物理CPU&lt;/strong&gt;：物理CPU就是插在主机上的真实的CPU硬件，在Linux下可
      
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="Linux" scheme="http://yoursite.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>博客基本配置</title>
    <link href="http://yoursite.com/2019/06/04/%E5%8D%9A%E5%AE%A2%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE/"/>
    <id>http://yoursite.com/2019/06/04/博客基本配置/</id>
    <published>2019-06-04T07:47:11.389Z</published>
    <updated>2019-06-04T08:37:09.905Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/zhangChaoWrecked/pictures/master/Background.jpg" alt=""></p><h2 id="环境初始化"><a href="#环境初始化" class="headerlink" title="环境初始化"></a>环境初始化</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g    //安装hexo modules</span><br><span class="line"></span><br><span class="line">mkdir WreckedBolg       //创建目录</span><br><span class="line"> </span><br><span class="line">cd WreckedBolg         //进入目录</span><br><span class="line"> </span><br><span class="line">hexo init             //初始化目录</span><br><span class="line"></span><br><span class="line">npm install hexo-deployer-git --save  安装部署gitHub依赖</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">git clone https://github.com/theme-next/hexo-theme-next themes/next  //主题文件地址</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">npm install hexo-generator-searchdb --save     //搜素引擎依赖包</span><br><span class="line"> </span><br><span class="line">npm install hexo-related-popular-posts --save  //相关文章包</span><br></pre></td></tr></table></figure><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server      //生成本地Service http://localhost:4000/ 访问地址  hexo s 简写</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate   //生成静态HTML  hexo g 简写</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy   //部署到GitHub   hexo d 简写</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p><h3 id="配置文件-config-yml"><a href="#配置文件-config-yml" class="headerlink" title="配置文件 _config.yml"></a>配置文件 _config.yml</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: https://github.com/***/***.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure><h3 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">hexo g #完整命令为hexo generate,用于生成静态文件</span><br><span class="line"></span><br><span class="line">hexo s #完整命令为hexo server,用于启动服务器，主要用来本地预览</span><br><span class="line"></span><br><span class="line">hexo d #完整命令为hexo deploy,用于将本地文件发布到github等git仓库上</span><br><span class="line"></span><br><span class="line">hexo n “my article” #完整命令为hexo new,用于新建一篇名为“my article”的文章</span><br><span class="line"></span><br><span class="line">hexo n “我的第一篇文章”</span><br><span class="line"></span><br><span class="line">hexo list  page / post / route / tag / category(参数) 查看博客对应信息</span><br></pre></td></tr></table></figure><h3 id="背景图设置"><a href="#背景图设置" class="headerlink" title="背景图设置"></a>背景图设置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">..\themes\next\layout\_layout.swig 目录 找到&lt;Body&gt;标签 设置背景图片 </span><br><span class="line"></span><br><span class="line">style=&quot;background: url(https://raw.githubusercontent.com/zhangChaoWrecked/pictures/master/Background.jpg) no-repeat fixed ;&quot;</span><br></pre></td></tr></table></figure><p><a href="http://theme-next.iissnan.com/getting-started.html" target="_blank" rel="noopener">点击跳转配置教程链接</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/zhangChaoWrecked/pictures/master/Background.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;环境初始化&quot;&gt;&lt;a href=&quot;#环境初始化&quot; 
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>如何在一台电脑使用GitHub GitLab进行项目维护</title>
    <link href="http://yoursite.com/2019/06/04/%E5%A6%82%E4%BD%95%E5%9C%A8%E4%B8%80%E5%8F%B0%E7%94%B5%E8%84%91%E4%BD%BF%E7%94%A8GitHub%20GitLab%E8%BF%9B%E8%A1%8C%E9%A1%B9%E7%9B%AE%E7%BB%B4%E6%8A%A4/"/>
    <id>http://yoursite.com/2019/06/04/如何在一台电脑使用GitHub GitLab进行项目维护/</id>
    <published>2019-06-04T04:00:00.000Z</published>
    <updated>2019-06-05T03:35:51.717Z</updated>
    
    <content type="html"><![CDATA[<h4 id="1-生成SSH-Key"><a href="#1-生成SSH-Key" class="headerlink" title="1.生成SSH Key"></a>1.生成SSH Key</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">在 C:\Users\用户名\.ssh 目录 鼠标右键 git bash </span><br><span class="line">ssh-keygen -t rsa -C &quot;****@qq.com&quot;  //生成pub文件需指定生成文件名 id_rsa_hub/id_rsa_lab 区分GitHub/GitLab</span><br><span class="line">ssh-keygen -t rsa -C &quot;****@163.com&quot;</span><br></pre></td></tr></table></figure><h4 id="2-配置Config"><a href="#2-配置Config" class="headerlink" title="2.配置Config"></a>2.配置Config</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">在 C:\Users\用户名\.ssh 目录 生成config文件 编辑如下：</span><br><span class="line"></span><br><span class="line"># self(****@qq.com)</span><br><span class="line">Host github(拉取代码时仓库的别名)    </span><br><span class="line">    Port 22</span><br><span class="line">    User git</span><br><span class="line">    HostName github.com (github域名)   </span><br><span class="line">    PreferredAuthentications publickey</span><br><span class="line">    IdentityFile ~/.ssh/id_rsa_hub (生成的GitHub公钥)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># company(****@163.com)</span><br><span class="line">Host gitlab(拉取代码时仓库的别名)   </span><br><span class="line">    Port 端口(默认22)</span><br><span class="line">    User git</span><br><span class="line">    HostName  ******* (公司GitLab域名)  </span><br><span class="line">    PreferredAuthentications publickey</span><br><span class="line">    IdentityFile ~/.ssh/id_rsa_lab(生成的GitLab公钥)</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">Host 作用[github为例]：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#传统使用</span><br><span class="line">$git clone git@github.com:zhangChaoWrecked/pictures.git</span><br><span class="line">$git remote add origin git@github.com:zhangChaoWrecked/pictures.git</span><br><span class="line"></span><br><span class="line">#配置Config之后使用(host也可配置为域名即:github.com) </span><br><span class="line">$git clone git@[Host]:zhangChaoWrecked/pictures.git</span><br><span class="line">$git remote add origin git@[Host]:zhangChaoWrecked/pictures.git</span><br></pre></td></tr></table></figure><h6 id="生成文件如下图："><a href="#生成文件如下图：" class="headerlink" title="生成文件如下图："></a>生成文件如下图：</h6><p><img src="https://raw.githubusercontent.com/zhangChaoWrecked/pictures/master/host.png" alt="">   </p><h6 id="配置Hosts-加速-拉取代码速度"><a href="#配置Hosts-加速-拉取代码速度" class="headerlink" title="配置Hosts 加速 拉取代码速度"></a>配置Hosts 加速 拉取代码速度</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">151.101.185.194    github.global.ssl.fastly.net</span><br><span class="line">192.30.253.112     github.com</span><br></pre></td></tr></table></figure><h4 id="3-测试关联"><a href="#3-测试关联" class="headerlink" title="3.测试关联"></a>3.测试关联</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github</span><br><span class="line">ssh -T git@gitlab</span><br></pre></td></tr></table></figure><h4 id="4-拉取远程代码或下载到本地"><a href="#4-拉取远程代码或下载到本地" class="headerlink" title="4.拉取远程代码或下载到本地"></a>4.拉取远程代码或下载到本地</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#取消全局 用户名/邮箱 配置(可跳过)</span><br><span class="line">$git config --global --unset user.name</span><br><span class="line">$git config --global --unset user.email</span><br><span class="line"></span><br><span class="line">$cd 项目名</span><br><span class="line">$git init</span><br><span class="line">$git config --local user.name &quot;用户名&quot;</span><br><span class="line">$git config --local user.email &quot;邮箱&quot;</span><br><span class="line">$git remote add origin git@[host]:***/***.git(git remote rm origin 删除之前关联的origin)</span><br><span class="line">$git pull orgin master</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;1-生成SSH-Key&quot;&gt;&lt;a href=&quot;#1-生成SSH-Key&quot; class=&quot;headerlink&quot; title=&quot;1.生成SSH Key&quot;&gt;&lt;/a&gt;1.生成SSH Key&lt;/h4&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;tabl
      
    
    </summary>
    
    
      <category term="GitHub" scheme="http://yoursite.com/tags/GitHub/"/>
    
  </entry>
  
  <entry>
    <title>Volatile</title>
    <link href="http://yoursite.com/2019/02/22/Volatile/"/>
    <id>http://yoursite.com/2019/02/22/Volatile/</id>
    <published>2019-02-22T03:58:33.000Z</published>
    <updated>2019-06-04T09:23:10.822Z</updated>
    
    <content type="html"><![CDATA[<h3 id="上下文切换"><a href="#上下文切换" class="headerlink" title="上下文切换"></a>上下文切换</h3><p>  阐述：CPU通过时间片分配算法来循环执行任务，当前任务执行一个时间片后会切换到下一个<br>任务。但是，在切换前会保存上一个任务的状态，以便下次切换回这个任务时，可以再加载这<br>个任务的状态。所以任务从保存到再加载的过程就是一次上下文切换</p><table><thead><tr><th>如何减少上下文切换</th><th>方案</th></tr></thead><tbody><tr><td>无锁并发编程</td><td>将数据的ID按照Hash算法取模分段，不同的线程处理不同段的数据</td></tr><tr><td>CAS算法</td><td>Java的Atomic包使用CAS算法来更新数据，而不需要加锁</td></tr><tr><td>使用最少线程</td><td>避免创建不需要的线程</td></tr></tbody></table><h3 id="volatile"><a href="#volatile" class="headerlink" title="volatile"></a>volatile</h3><table><thead><tr><th>描述</th><th>特点</th></tr></thead><tbody><tr><td>1.使用volatile关键字会强制将修改的值立即写入主存</td><td>1.保证有序性、可见性</td></tr><tr><td>2.导致其他线程的工作内存中缓存变量的缓存行无效</td><td>2.不保证原子性</td></tr></tbody></table><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">应用场景：状态标志</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;上下文切换&quot;&gt;&lt;a href=&quot;#上下文切换&quot; class=&quot;headerlink&quot; title=&quot;上下文切换&quot;&gt;&lt;/a&gt;上下文切换&lt;/h3&gt;&lt;p&gt;  阐述：CPU通过时间片分配算法来循环执行任务，当前任务执行一个时间片后会切换到下一个&lt;br&gt;任务。但是，在切换前
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>RabbitMQ安装</title>
    <link href="http://yoursite.com/2019/01/19/RabbitMQ%E5%AE%89%E8%A3%85/"/>
    <id>http://yoursite.com/2019/01/19/RabbitMQ安装/</id>
    <published>2019-01-19T03:49:08.000Z</published>
    <updated>2019-02-22T04:08:12.000Z</updated>
    
    <content type="html"><![CDATA[<h5 id="erlang下载"><a href="#erlang下载" class="headerlink" title="erlang下载"></a><a href="https://www.erlang.org/downloads/" target="_blank" rel="noopener">erlang下载</a></h5><p><img src="https://raw.githubusercontent.com/zhangChaoWrecked/pictures/master/erlang.png" alt="erlang客户端"></p><h5 id="rabbit下载"><a href="#rabbit下载" class="headerlink" title="rabbit下载"></a><a href="http://www.rabbitmq.com/install-windows.html#install" target="_blank" rel="noopener">rabbit下载</a></h5><p><img src="https://raw.githubusercontent.com/zhangChaoWrecked/pictures/master/rabbitmq.png" alt="rabbit客户端"></p><h5 id="cmd命令行"><a href="#cmd命令行" class="headerlink" title="cmd命令行"></a><a href="#">cmd命令行</a></h5><p><img src="https://raw.githubusercontent.com/zhangChaoWrecked/pictures/master/RabbitCmd.png" alt="cmd界面"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;E:\rabbitMq\rabbitmq_server-3.7.10\sbin\rabbitmq-plugins.bat&quot;  enable rabbitmq_management  开启web管理接口</span><br><span class="line"> </span><br><span class="line">net stop RabbitMQ &amp;&amp; net start RabbitMQ 重启rabbitMQ</span><br><span class="line"></span><br><span class="line">rabbitmqctl.bat list_users 列出当前用户列表</span><br></pre></td></tr></table></figure></p><table><thead><tr><th>账号</th><th>密码</th></tr></thead><tbody><tr><td>guest(默认)</td><td>guest(默认)</td></tr></tbody></table><h5 id="本地浏览器打开"><a href="#本地浏览器打开" class="headerlink" title="本地浏览器打开"></a><a href="http://localhost:15672" target="_blank" rel="noopener">本地浏览器打开</a></h5><p><img src="https://raw.githubusercontent.com/zhangChaoWrecked/pictures/master/LocalRabbit.png" alt="本地打开"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h5 id=&quot;erlang下载&quot;&gt;&lt;a href=&quot;#erlang下载&quot; class=&quot;headerlink&quot; title=&quot;erlang下载&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://www.erlang.org/downloads/&quot; target=&quot;_blank&quot; re
      
    
    </summary>
    
      <category term="MQ" scheme="http://yoursite.com/categories/MQ/"/>
    
    
      <category term="rabbitmq" scheme="http://yoursite.com/tags/rabbitmq/"/>
    
  </entry>
  
  <entry>
    <title>Java DES(对称加密)</title>
    <link href="http://yoursite.com/2019/01/16/Java%20Crypto(%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86)/"/>
    <id>http://yoursite.com/2019/01/16/Java Crypto(对称加密)/</id>
    <published>2019-01-16T09:39:31.000Z</published>
    <updated>2019-02-22T04:08:12.000Z</updated>
    
    <content type="html"><![CDATA[<h5 id="简单一种对称加密与解密"><a href="#简单一种对称加密与解密" class="headerlink" title="简单一种对称加密与解密"></a>简单一种对称加密与解密</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.crypto.Cipher;</span><br><span class="line"><span class="keyword">import</span> javax.crypto.KeyGenerator;</span><br><span class="line"><span class="keyword">import</span> javax.crypto.SecretKey;</span><br><span class="line"><span class="keyword">import</span> javax.crypto.spec.SecretKeySpec;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DESUtils</span> &#123;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 生成密钥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> byte[] initKey() throws Exception &#123;</span><br><span class="line">        KeyGenerator keyGen = KeyGenerator.getInstance(<span class="string">"DES"</span>);</span><br><span class="line">        keyGen.init(<span class="number">56</span>);</span><br><span class="line">        SecretKey secretKey = keyGen.generateKey();</span><br><span class="line">        <span class="keyword">return</span> secretKey.getEncoded();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * DES 加密</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">encrypt</span><span class="params">(byte[] data, byte[] key)</span> throws Exception </span>&#123;</span><br><span class="line">        SecretKey secretKey = <span class="keyword">new</span> SecretKeySpec(key, <span class="string">"DES"</span>);</span><br><span class="line"></span><br><span class="line">        Cipher cipher = Cipher.getInstance(<span class="string">"DES"</span>);</span><br><span class="line">        cipher.init(Cipher.ENCRYPT_MODE, secretKey);</span><br><span class="line">        byte[] cipherBytes = cipher.doFinal(data);</span><br><span class="line">        String result = byte2Hex(cipherBytes);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * DES 解密</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">decrypt</span><span class="params">(byte[] data, byte[] key)</span> throws Exception </span>&#123;</span><br><span class="line">        SecretKey secretKey = <span class="keyword">new</span> SecretKeySpec(key, <span class="string">"DES"</span>);</span><br><span class="line">        Cipher cipher = Cipher.getInstance(<span class="string">"DES"</span>);</span><br><span class="line">        cipher.init(Cipher.DECRYPT_MODE, secretKey);</span><br><span class="line">        byte[] plainBytes = cipher.doFinal(data);</span><br><span class="line">        String result = <span class="keyword">new</span> String(plainBytes);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">toByte</span><span class="params">(<span class="keyword">char</span> c)</span> </span>&#123;</span><br><span class="line">        byte b = (byte) <span class="string">"0123456789ABCDEF"</span>.indexOf(c);</span><br><span class="line">        <span class="keyword">return</span> b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> byte[] hexToByte(String hex) &#123;</span><br><span class="line">        <span class="keyword">int</span> len = (hex.length() / <span class="number">2</span>);</span><br><span class="line">        byte[] result = <span class="keyword">new</span> byte[len];</span><br><span class="line">        <span class="keyword">char</span>[] achar = hex.toCharArray();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> pos = i * <span class="number">2</span>;</span><br><span class="line">            result[i] = (byte) (toByte(achar[pos]) &lt;&lt; <span class="number">4</span> | toByte(achar[pos + <span class="number">1</span>]));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">byte2Hex</span><span class="params">(byte[] b)</span> </span>&#123;</span><br><span class="line">        String stmp = <span class="string">""</span>;</span><br><span class="line">        StringBuilder sb = <span class="keyword">new</span> StringBuilder(<span class="string">""</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> n = <span class="number">0</span>; n &lt; b.length; n++) &#123;</span><br><span class="line">            stmp = Integer.toHexString(b[n] &amp; <span class="number">0xFF</span>);</span><br><span class="line">            sb.append((stmp.length() == <span class="number">1</span>) ? <span class="string">"0"</span> + stmp : stmp);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sb.toString().toUpperCase().trim();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//加密</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">encryptStr</span><span class="params">(String str, String secreytKey)</span> throws Exception </span>&#123;</span><br><span class="line">        String enResult = encrypt(str.getBytes(), hexToByte(secreytKey));</span><br><span class="line">        <span class="keyword">return</span> enResult;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//解密</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">decryptStr</span><span class="params">(String str, String secreytKey)</span> throws Exception </span>&#123;</span><br><span class="line">        String deResult = decrypt(hexToByte(str), hexToByte(secreytKey));</span><br><span class="line">        <span class="keyword">return</span> deResult;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/***</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">        秘钥769bfbae9d20100d</span></span><br><span class="line"><span class="comment">        加密结果e3f6b60180661bb0d541de00260afb10</span></span><br><span class="line"><span class="comment">        解密结果hello_world</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @param args</span></span><br><span class="line"><span class="comment">     * @throws Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> throws Exception </span>&#123;</span><br><span class="line">        <span class="comment">//生成秘钥</span></span><br><span class="line">        byte[] desKey = initKey();</span><br><span class="line">        String secreytKey = byte2Hex(desKey);</span><br><span class="line">        System.out.println(<span class="string">"秘钥"</span> + secreytKey.toLowerCase());</span><br><span class="line">        <span class="comment">//加密</span></span><br><span class="line">        String hello_world = encryptStr(<span class="string">"hello_world"</span>, secreytKey);</span><br><span class="line">        System.out.println(<span class="string">"加密结果"</span> + hello_world.toLowerCase());</span><br><span class="line">        <span class="comment">//解密</span></span><br><span class="line">        String  deResult = decryptStr(hello_world, secreytKey);</span><br><span class="line">        System.out.println(<span class="string">"解密结果"</span> + deResult);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h5 id=&quot;简单一种对称加密与解密&quot;&gt;&lt;a href=&quot;#简单一种对称加密与解密&quot; class=&quot;headerlink&quot; title=&quot;简单一种对称加密与解密&quot;&gt;&lt;/a&gt;简单一种对称加密与解密&lt;/h5&gt;&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;t
      
    
    </summary>
    
      <category term="Java" scheme="http://yoursite.com/categories/Java/"/>
    
    
      <category term="Crypto" scheme="http://yoursite.com/tags/Crypto/"/>
    
  </entry>
  
  <entry>
    <title>ThreadLocal</title>
    <link href="http://yoursite.com/2018/12/04/ThreadLocal/"/>
    <id>http://yoursite.com/2018/12/04/ThreadLocal/</id>
    <published>2018-12-04T08:49:42.000Z</published>
    <updated>2019-02-22T04:08:12.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ThreadLocal-类结构图"><a href="#ThreadLocal-类结构图" class="headerlink" title="ThreadLocal 类结构图"></a>ThreadLocal 类结构图</h2><p><img src="https://raw.githubusercontent.com/zhangChaoWrecked/pictures/master/ThreadLocal2.png" alt="image"></p><h3 id="get"><a href="#get" class="headerlink" title="get"></a>get</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> T <span class="title">get</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Thread t = Thread.currentThread();</span><br><span class="line">        ThreadLocalMap <span class="built_in">map</span> = getMap(t);</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">map</span> != null) &#123;</span><br><span class="line">            ThreadLocalMap.Entry e = <span class="built_in">map</span>.getEntry(<span class="keyword">this</span>);</span><br><span class="line">            <span class="keyword">if</span> (e != null) &#123;</span><br><span class="line">                @SuppressWarnings(<span class="string">"unchecked"</span>)</span><br><span class="line">                T result = (T)e.value;</span><br><span class="line">                <span class="keyword">return</span> result;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> setInitialValue();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="set"><a href="#set" class="headerlink" title="set"></a>set</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set</span><span class="params">(T value)</span> </span>&#123;</span><br><span class="line">      Thread t = Thread.currentThread();</span><br><span class="line">      ThreadLocalMap <span class="built_in">map</span> = getMap(t);</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">map</span> != null)</span><br><span class="line">          <span class="built_in">map</span>.<span class="built_in">set</span>(<span class="keyword">this</span>, value);</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">          createMap(t, value);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h3 id="remove"><a href="#remove" class="headerlink" title="remove"></a>remove</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ThreadLocalMap m = getMap(Thread.currentThread());</span><br><span class="line">    <span class="keyword">if</span> (m != null)</span><br><span class="line">        m.remove(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="setInitialValue"><a href="#setInitialValue" class="headerlink" title="setInitialValue"></a>setInitialValue</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> T <span class="title">setInitialValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       T value = initialValue();</span><br><span class="line">       Thread t = Thread.currentThread();</span><br><span class="line">       ThreadLocalMap <span class="built_in">map</span> = getMap(t);</span><br><span class="line">       <span class="keyword">if</span> (<span class="built_in">map</span> != null)</span><br><span class="line">           <span class="built_in">map</span>.<span class="built_in">set</span>(<span class="keyword">this</span>, value);</span><br><span class="line">       <span class="keyword">else</span></span><br><span class="line">           createMap(t, value);</span><br><span class="line">       <span class="keyword">return</span> value;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h3 id="initialValue"><a href="#initialValue" class="headerlink" title="initialValue"></a>initialValue</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> T <span class="title">initialValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> null;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="getMap"><a href="#getMap" class="headerlink" title="getMap"></a>getMap</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">ThreadLocalMap <span class="title">getMap</span><span class="params">(Thread t)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> t.threadLocals;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="createMap"><a href="#createMap" class="headerlink" title="createMap"></a>createMap</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">createMap</span><span class="params">(Thread t, T firstValue)</span> </span>&#123;</span><br><span class="line">      t.threadLocals = <span class="keyword">new</span> ThreadLocalMap(<span class="keyword">this</span>, firstValue);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;ThreadLocal-类结构图&quot;&gt;&lt;a href=&quot;#ThreadLocal-类结构图&quot; class=&quot;headerlink&quot; title=&quot;ThreadLocal 类结构图&quot;&gt;&lt;/a&gt;ThreadLocal 类结构图&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;http
      
    
    </summary>
    
      <category term="Java" scheme="http://yoursite.com/categories/Java/"/>
    
    
      <category term="ThreadLocal" scheme="http://yoursite.com/tags/ThreadLocal/"/>
    
  </entry>
  
  <entry>
    <title>Linux Top命令</title>
    <link href="http://yoursite.com/2018/11/30/Linux%20Top%E5%91%BD%E4%BB%A4/"/>
    <id>http://yoursite.com/2018/11/30/Linux Top命令/</id>
    <published>2018-11-30T09:39:31.000Z</published>
    <updated>2019-06-04T08:37:09.879Z</updated>
    
    <content type="html"><![CDATA[<h3 id="uptime-top"><a href="#uptime-top" class="headerlink" title="uptime / top"></a>uptime / top</h3><p><img src="https://raw.githubusercontent.com/zhangChaoWrecked/pictures/master/top.png" alt="image"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">16:36:50 up 108 days,  7:24,  2 users,  load average: 61.27, 61.50, 61.60</span><br></pre></td></tr></table></figure></p><table><thead><tr><th>Field</th><th>Desc</th></tr></thead><tbody><tr><td>16:36:50</td><td>时间</td></tr><tr><td>up 1:22</td><td>系统运行时间</td></tr><tr><td>users</td><td>当前登录用户数</td></tr><tr><td>load average</td><td>三个数值分别为  1分钟、5分钟、15分钟前到现在的平均负载</td></tr></tbody></table><h2 id="英文文档链接-Understanding-Load-Averages"><a href="#英文文档链接-Understanding-Load-Averages" class="headerlink" title="英文文档链接 Understanding-Load-Averages"></a>英文文档链接 <a href="http://blog.scoutapp.com/articles/2009/07/31/understanding-load-averages" target="_blank" rel="noopener">Understanding-Load-Averages</a></h2><h2 id="中文文档链接-Understanding-Load-Averages"><a href="#中文文档链接-Understanding-Load-Averages" class="headerlink" title="中文文档链接 Understanding-Load-Averages"></a>中文文档链接 <a href="http://www.ruanyifeng.com/blog/2011/07/linux_load_average_explained.html" target="_blank" rel="noopener">Understanding-Load-Averages</a></h2><h3 id="Tasks"><a href="#Tasks" class="headerlink" title="Tasks"></a>Tasks</h3><table><thead><tr><th>key</th><th>value</th><th>Desc</th></tr></thead><tbody><tr><td>29</td><td>total</td><td>进程总数</td></tr><tr><td>1</td><td>running</td><td>正在运行的进程数</td></tr><tr><td>28</td><td>sleeping</td><td>睡眠的进程数</td></tr><tr><td>0</td><td>stopped</td><td>停止的进程数</td></tr><tr><td>0</td><td>zombie</td><td>僵尸进程数</td></tr></tbody></table><h3 id="Cpu-s"><a href="#Cpu-s" class="headerlink" title="Cpu(s)"></a>Cpu(s)</h3><table><thead><tr><th>key</th><th>value</th><th>Desc</th></tr></thead><tbody><tr><td>0.3%</td><td>us</td><td>用户空间占用CPU百分比</td></tr><tr><td>1.0%</td><td>sy</td><td>内核空间占用CPU百分比</td></tr><tr><td>0.0%</td><td>ni</td><td>用户进程空间内改变过优先级的进程占用CPU百分比</td></tr><tr><td>98.7%</td><td>id</td><td>空闲CPU百分比</td></tr><tr><td>0.0%</td><td>wa</td><td>等待输入输出的CPU时间百分比</td></tr></tbody></table><h3 id="Mem"><a href="#Mem" class="headerlink" title="Mem"></a>Mem</h3><table><thead><tr><th>key</th><th>value</th><th>Desc</th></tr></thead><tbody><tr><td> 191272k</td><td>total</td><td>物理内存总量</td></tr><tr><td>173656k</td><td>used</td><td>使用的物理内存总量</td></tr><tr><td>17616k</td><td>free</td><td>空闲内存总量</td></tr><tr><td>22052k</td><td>buffers</td><td>用作内核缓存的内存量</td></tr></tbody></table><h3 id="Swap"><a href="#Swap" class="headerlink" title="Swap"></a>Swap</h3><table><thead><tr><th>key</th><th>value</th><th>Desc</th></tr></thead><tbody><tr><td> 192772k</td><td>total</td><td>交换区总量</td></tr><tr><td>0k</td><td>used</td><td>使用的交换区总量</td></tr><tr><td>192772k</td><td>free</td><td>空闲交换区总量</td></tr><tr><td>123988k</td><td>cached</td><td>缓冲的交换区总量。</td></tr></tbody></table><h3 id="详细信息"><a href="#详细信息" class="headerlink" title="详细信息"></a>详细信息</h3><table><thead><tr><th>Key</th><th>Desc</th></tr></thead><tbody><tr><td>PID</td><td>进程id</td></tr><tr><td>PPID</td><td>父进程id</td></tr><tr><td>RUSER</td><td>Real user name</td></tr><tr><td>UID</td><td>进程所有者的用户id</td></tr><tr><td>USER</td><td>进程所有者的用户名</td></tr><tr><td>GROUP</td><td>进程所有者的组名</td></tr><tr><td>TTY</td><td>启动进程的终端名。不是从终端启动的进程则显示为 ?</td></tr><tr><td>PR</td><td>优先级</td></tr><tr><td>NI</td><td>nice值。负值表示高优先级，正值表示低优先级</td></tr><tr><td>P</td><td>最后使用的CPU，仅在多CPU环境下有意义</td></tr><tr><td>%CPU</td><td>上次更新到现在的CPU时间占用百分比</td></tr><tr><td>TIME</td><td>进程使用的CPU时间总计，单位秒</td></tr><tr><td>TIME+</td><td>进程使用的CPU时间总计，单位1/100秒</td></tr><tr><td>%MEM</td><td>进程使用的物理内存百分比</td></tr><tr><td>VIRT</td><td>进程使用的虚拟内存总量，单位kb。VIRT=SWAP+RES</td></tr><tr><td>SWAP</td><td>进程使用的虚拟内存中，被换出的大小，单位kb。</td></tr><tr><td>RES</td><td>进程使用的、未被换出的物理内存大小，单位kb。RES=CODE+DATA</td></tr><tr><td>CODE</td><td>可执行代码占用的物理内存大小，单位kb</td></tr><tr><td>DATA</td><td>可执行代码以外的部分(数据段+栈)占用的物理内存大小，单位kb</td></tr><tr><td>SHR</td><td>共享内存大小，单位kb</td></tr><tr><td>nFLT</td><td>页面错误次数</td></tr><tr><td>nDRT</td><td>最后一次写入到现在，被修改过的页面数。</td></tr><tr><td>S</td><td>进程状态。</td></tr><tr><td>  S</td><td>D=不可中断的睡眠状态</td></tr><tr><td>  S</td><td>R=运行</td></tr><tr><td>  S</td><td>S=睡眠</td></tr><tr><td>   S</td><td>T=跟踪/停止</td></tr><tr><td>  S</td><td>Z=僵尸进程</td></tr><tr><td>COMMAND</td><td>命令名/命令行</td></tr><tr><td>WCHAN</td><td>若该进程在睡眠，则显示睡眠中的系统函数名</td></tr><tr><td>Flags</td><td>任务标志，参考 sched.h</td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;uptime-top&quot;&gt;&lt;a href=&quot;#uptime-top&quot; class=&quot;headerlink&quot; title=&quot;uptime / top&quot;&gt;&lt;/a&gt;uptime / top&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;https://raw.githubuserco
      
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="Linux" scheme="http://yoursite.com/tags/Linux/"/>
    
  </entry>
  
</feed>
